function googleSuccess(){ko.applyBindings(new app.ViewModel)}function googleError(){var e="There has been an error.";e+="\n\nRefresh page and this error should go away.";var a='<div id="carousel-example-generic" class="carousel slide"data-ride="carousel"><div class="carousel-inner" role="listbox"><div class="item active"><img  src="img/google-map-api.png" class="img-responsive " alt="Responsive image" /><div class="carousel-caption set-caption"><div class="full-width text-center"><h3 class="error">'+e.toUpperCase()+"</h3></div></div></div></div>";return $("#view").html(a),!0}var app=app||{};app.model={locations:["320 Pioneer Way, Mountain View, CA 94041, United States","80 W El Camino Real, Mountain View, CA 94040, United States","Grant Park Plaza, 1040 Grant Road #350, Mountain View, CA 94040, United States","635 W Dana St, Mountain View, CA 94041, United States","53 W El Camino Real, Mountain View, CA 94040, United States","Grant Park Plaza, 1040 Grant Rd, Mountain View, CA 94040, United States","145 E Dana St, Mountain View, CA 94041, United States","701 E El Camino Real, Mountain View, CA 94040, United States","Grant Park Plaza, 1350 Grant Rd Suite 8, Mountain View, CA 94040, United States","750 Castro St, Mountain View, CA 94041, United States"],googleMap:'<div id="map"></div>',currentMarker:null,mapOptions:{disableDefaultUI:!0},service:null,getInfoWindow:function(){return new google.maps.InfoWindow},auth:{consumerKey:"CczkBNRj_eaoMgqd0o4n1A",consumerSecret:"jfMHfpHubGUZWRBXVAjTaTMRrbo",accessToken:"0IKGCVVzoRIpB2WKQtFPYa_stRAlzmYO",accessTokenSecret:"JEoYIbjq2NJkywPo7HBu_pG4GgE",serviceProvider:{signatureMethod:"HMAC-SHA1"}},placeDetailsByPlaceId:function(e){var a=e.placeId,o={placeId:a};app.ViewModel.service.getDetails(o,app.model.placeCallBack)},placeCallBack:function(e,a){a===google.maps.places.PlacesServiceStatus.OK&&(console.log("place: "),console.log(e),app.model.getYelpData(e))},getYelpData:function(e){console.log("about to request yelp data");var a="business",o=e.formatted_address,r=3,n={consumerSecret:app.model.auth.consumerSecret,tokenSecret:app.model.auth.accessTokenSecret},t=[];t.push(["term",a]),t.push(["limit",r]),t.push(["location",o]),t.push(["callback","cb"]),t.push(["oauth_consumer_key",app.model.auth.consumerKey]),t.push(["oauth_consumer_secret",app.model.auth.consumerSecret]),t.push(["oauth_token",app.model.auth.accessToken]),t.push(["oauth_signature_method","HMAC-SHA1"]);var l={action:"http://api.yelp.com/v2/search",method:"GET",parameters:t};OAuth.setTimestampAndNonce(l),OAuth.SignatureMethod.sign(l,n);var i=OAuth.getParameterMap(l.parameters);i.oauth_signature=OAuth.percentEncode(i.oauth_signature);var p=setTimeout(function(){app.model.handleError("Yelp data retrieval error!")},5e3);$.ajax({url:l.action,data:i,cache:!0,dataType:"jsonp",jsonpCallback:"cb"}).done(function(a){console.log(a),clearTimeout(p);var o=$("#marker-tbl-row").html(),r=Handlebars.compile(o),n=a.businesses;n.name=e.name,n.icon=e.icon;var t=r(n),l=app.ViewModel.map,i=app.model.currentMarker;app.model.currentMarker.infoWindow.setContent(t),console.log(app.model.currentMarker.infoWindow),app.model.currentMarker.infoWindow.open(l,i)}).fail(function(e,a){app.model.handleError(a)})},handleError:function(e){var a=$("#yelpErrorScript").html(),o=Handlebars.compile(a),r={imgUrl:"img/warning.png",error:"Error: "+e+" Please Try again."},n=o(r);app.model.currentMarker.infoWindow.setContent(n),app.model.currentMarker.infoWindow.open(app.ViewModel.map,app.model.currentMarker)}},app.ViewModel=function(){var e=this;e.timedOut=!1,e.markers=ko.observableArray([]),$("#mapDiv").append(app.model.googleMap);try{app.ViewModel.map=new google.maps.Map(document.getElementById("map"),app.model.mapOptions)}catch(a){console.log("error: "+a.message),e.stop=googleError()}finally{}app.ViewModel.service=new google.maps.places.PlacesService(app.ViewModel.map),app.ViewModel.createMapMarker=function(a){var o=a.geometry.location.lat(),r=a.geometry.location.lng(),n=a.name,t=window.mapBounds,l=new google.maps.Marker({map:app.ViewModel.map,position:a.geometry.location,title:n,placeId:a.place_id,draggable:!0,animation:google.maps.Animation.DROP});l.infoWindow=app.model.getInfoWindow(),e.markers.push(l),app.model.locations.length===e.markers().length&&(e.timedOut=!1,clearTimeout(e.requestTimer),console.log("timer reset")),google.maps.event.addListener(l,"click",function(){null!==app.model.currentMarker&&null!==app.model.currentMarker.infoWindow&&app.model.currentMarker.infoWindow.close(),app.model.currentMarker=null,app.model.currentMarker=l,app.model.placeDetailsByPlaceId(app.model.currentMarker)}),l.addListener("click",app.ViewModel.toggleBounce),t.extend(new google.maps.LatLng(o,r)),app.ViewModel.map.fitBounds(t),app.ViewModel.map.setCenter(t.getCenter())},app.ViewModel.toggleBounce=function(){e.markers().forEach(function(e){e.setAnimation(null)}),app.model.currentMarker.setAnimation(google.maps.Animation.BOUNCE)},e.callback=function(e,a){if(console.log("in callback"),a===google.maps.places.PlacesServiceStatus.OK){app.ViewModel.createMapMarker(e[0]);var o=e[0];console.log(o)}},this.pinPoster=function(){app.model.locations.forEach(function(a){var o={query:a};app.ViewModel.service.textSearch(o,e.callback)})},window.mapBounds=new google.maps.LatLngBounds,e.requestTimer=setTimeout(function(){e.timedOut=!0,console.log("Request timed out."),googleError()},1e4),e.pinPoster(),e.addMarker=function(a,o){e.markers()[a].setMap(o)},e.setMapOnAll=function(a){for(var o=0;o<e.markers().length;o++)e.markers()[o].setMap(a)},e.filterMarkers=function(a){e.setMapOnAll(null),e.markers().forEach(function(o,r){var n=o.title;a||e.setMapOnAll(app.ViewModel.map),-1!==n.toLowerCase().indexOf(a)&&e.addMarker(r,app.ViewModel.map)})},e.filter=ko.observable(""),e.initialize=!0,e.filteredItems=ko.computed(function(){var a=e.filter().toLowerCase();return a?(e.filterMarkers(a),ko.utils.arrayFilter(e.markers(),function(e){return-1!==e.title.toLowerCase().indexOf(a)})):(e.filterMarkers(a),e.markers())}),this.showInfowindow=function(a){null!==app.model.currentMarker&&null!==app.model.currentMarker.infoWindow&&app.model.currentMarker.infoWindow.close(),e.filter(""),app.model.currentMarker=null,app.model.currentMarker=a,app.ViewModel.toggleBounce(),app.model.placeDetailsByPlaceId(app.model.currentMarker)},window.addEventListener("resize",function(e){app.ViewModel.map.fitBounds(window.mapBounds),console.log("resized"+e.message)})};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJnb29nbGVTdWNjZXNzIiwia28iLCJhcHBseUJpbmRpbmdzIiwiYXBwIiwiVmlld01vZGVsIiwiZ29vZ2xlRXJyb3IiLCJhbGVydG1zZyIsImVycm9yUGdDb250ZW50IiwidG9VcHBlckNhc2UiLCIkIiwiaHRtbCIsIm1vZGVsIiwibG9jYXRpb25zIiwiZ29vZ2xlTWFwIiwiY3VycmVudE1hcmtlciIsIm1hcE9wdGlvbnMiLCJkaXNhYmxlRGVmYXVsdFVJIiwic2VydmljZSIsImdldEluZm9XaW5kb3ciLCJnb29nbGUiLCJtYXBzIiwiSW5mb1dpbmRvdyIsImF1dGgiLCJjb25zdW1lcktleSIsImNvbnN1bWVyU2VjcmV0IiwiYWNjZXNzVG9rZW4iLCJhY2Nlc3NUb2tlblNlY3JldCIsInNlcnZpY2VQcm92aWRlciIsInNpZ25hdHVyZU1ldGhvZCIsInBsYWNlRGV0YWlsc0J5UGxhY2VJZCIsIm1hcmtlciIsInBsYWNlSWQiLCJyZXF1ZXN0IiwiZ2V0RGV0YWlscyIsInBsYWNlQ2FsbEJhY2siLCJwbGFjZSIsInN0YXR1cyIsInBsYWNlcyIsIlBsYWNlc1NlcnZpY2VTdGF0dXMiLCJPSyIsImNvbnNvbGUiLCJsb2ciLCJnZXRZZWxwRGF0YSIsInRlcm1zIiwibmVhciIsImZvcm1hdHRlZF9hZGRyZXNzIiwibGltaXQiLCJhY2Nlc3NvciIsInRva2VuU2VjcmV0IiwicGFyYW1ldGVycyIsInB1c2giLCJtZXNzYWdlIiwiYWN0aW9uIiwibWV0aG9kIiwiT0F1dGgiLCJzZXRUaW1lc3RhbXBBbmROb25jZSIsIlNpZ25hdHVyZU1ldGhvZCIsInNpZ24iLCJwYXJhbWV0ZXJNYXAiLCJnZXRQYXJhbWV0ZXJNYXAiLCJvYXV0aF9zaWduYXR1cmUiLCJwZXJjZW50RW5jb2RlIiwiYXBpVGltZW91dCIsInNldFRpbWVvdXQiLCJoYW5kbGVFcnJvciIsImFqYXgiLCJ1cmwiLCJkYXRhIiwiY2FjaGUiLCJkYXRhVHlwZSIsImpzb25wQ2FsbGJhY2siLCJkb25lIiwiY2xlYXJUaW1lb3V0Iiwic291cmNlIiwidGVtcGxhdGUiLCJIYW5kbGViYXJzIiwiY29tcGlsZSIsImJ1c2luZXNzZXMiLCJuYW1lIiwiaWNvbiIsInRNYXAiLCJtYXAiLCJ0Q3VycmVudE1hcmtlciIsImluZm9XaW5kb3ciLCJzZXRDb250ZW50Iiwib3BlbiIsImZhaWwiLCJqcVhIUiIsInRleHRTdGF0dXMiLCJlcnJvciIsImltZ1VybCIsInNlbGYiLCJ0aGlzIiwidGltZWRPdXQiLCJtYXJrZXJzIiwib2JzZXJ2YWJsZUFycmF5IiwiYXBwZW5kIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImUiLCJzdG9wIiwiUGxhY2VzU2VydmljZSIsImNyZWF0ZU1hcE1hcmtlciIsInBsYWNlRGF0YSIsImxhdCIsImdlb21ldHJ5IiwibG9jYXRpb24iLCJsb24iLCJsbmciLCJib3VuZHMiLCJ3aW5kb3ciLCJtYXBCb3VuZHMiLCJNYXJrZXIiLCJwb3NpdGlvbiIsInRpdGxlIiwicGxhY2VfaWQiLCJkcmFnZ2FibGUiLCJhbmltYXRpb24iLCJBbmltYXRpb24iLCJEUk9QIiwibGVuZ3RoIiwicmVxdWVzdFRpbWVyIiwiZXZlbnQiLCJhZGRMaXN0ZW5lciIsImNsb3NlIiwidG9nZ2xlQm91bmNlIiwiZXh0ZW5kIiwiTGF0TG5nIiwiZml0Qm91bmRzIiwic2V0Q2VudGVyIiwiZ2V0Q2VudGVyIiwiZm9yRWFjaCIsIm1hcmsiLCJzZXRBbmltYXRpb24iLCJCT1VOQ0UiLCJjYWxsYmFjayIsInJlc3VsdHMiLCJwaW5Qb3N0ZXIiLCJxdWVyeSIsInRleHRTZWFyY2giLCJMYXRMbmdCb3VuZHMiLCJhZGRNYXJrZXIiLCJpbmRleCIsInNldE1hcCIsInNldE1hcE9uQWxsIiwiaSIsImZpbHRlck1hcmtlcnMiLCJmaWx0ZXIiLCJtYXJrZXJTdHIiLCJ0b0xvd2VyQ2FzZSIsImluZGV4T2YiLCJvYnNlcnZhYmxlIiwiaW5pdGlhbGl6ZSIsImZpbHRlcmVkSXRlbXMiLCJjb21wdXRlZCIsInV0aWxzIiwiYXJyYXlGaWx0ZXIiLCJpdGVtIiwic2hvd0luZm93aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIl0sIm1hcHBpbmdzIjoiQUFhQSxRQUFBQSxpQkFDQUMsR0FBQUMsY0FBQSxHQUFBQyxLQUFBQyxXQU1BLFFBQUFDLGVBQ0EsR0FBQUMsR0FBQSwwQkFDQUEsSUFBQSxpREFDQSxJQUFBQyxHQUFBLHlVQU9BRCxFQUFBRSxjQUFBLCtCQUdBLE9BREFDLEdBQUEsU0FBQUMsS0FBQUgsSUFDQSxFQTVCQSxHQUFBSixLQUFBQSxPQStCQUEsS0FBQVEsT0FFQUMsV0FFQSwwREFDQSw4REFDQSxpRkFFQSx3REFDQSw4REFDQSwwRUFDQSx3REFDQSwrREFDQSxrRkFFQSx5REFFQUMsVUFBQSx1QkFDQUMsY0FBQSxLQUNBQyxZQUFBQyxrQkFBQSxHQUNBQyxRQUFBLEtBTUFDLGNBQUEsV0FDQSxNQUFBLElBQUFDLFFBQUFDLEtBQUFDLFlBRUFDLE1BSUFDLFlBQUEseUJBQ0FDLGVBQUEsOEJBQ0FDLFlBQUEsbUNBR0FDLGtCQUFBLDhCQUNBQyxpQkFBQUMsZ0JBQUEsY0FPQUMsc0JBQUEsU0FBQUMsR0FHQSxHQUFBQyxHQUFBRCxFQUFBQyxRQUVBQyxHQUFBRCxRQUFBQSxFQUVBNUIsS0FBQUMsVUFBQWEsUUFBQWdCLFdBQUFELEVBQUE3QixJQUFBUSxNQUFBdUIsZ0JBUUFBLGNBQUEsU0FBQUMsRUFBQUMsR0FDQUEsSUFBQWpCLE9BQUFDLEtBQUFpQixPQUFBQyxvQkFBQUMsS0FDQUMsUUFBQUMsSUFBQSxXQUNBRCxRQUFBQyxJQUFBTixHQUNBaEMsSUFBQVEsTUFBQStCLFlBQUFQLEtBV0FPLFlBQUEsU0FBQVAsR0FDQUssUUFBQUMsSUFBQSw2QkFDQSxJQUFBRSxHQUFBLFdBQ0FDLEVBQUFULEVBQUFVLGtCQUNBQyxFQUFBLEVBRUFDLEdBQ0F2QixlQUFBckIsSUFBQVEsTUFBQVcsS0FBQUUsZUFDQXdCLFlBQUE3QyxJQUFBUSxNQUFBVyxLQUFBSSxtQkFHQXVCLElBQ0FBLEdBQUFD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LEVBQUFHLGFBTUFGLEtBQUFtRSxlQUFBLFNBQUFqSSxHQUNBLE9BQUEzQixJQUFBUSxNQUFBRyxlQUNBLE9BQUFYLElBQUFRLE1BQUFHLGNBQUFxRSxZQUNBaEYsSUFBQVEsTUFBQUcsY0FBQXFFLFdBQUEwQyxRQUVBbEMsRUFBQXlELE9BQUEsSUFFQWpKLElBQUFRLE1BQUFHLGNBQUEsS0FDQVgsSUFBQVEsTUFBQUcsY0FBQWdCLEVBQ0EzQixJQUFBQyxVQUFBMEgsZUFDQTNILElBQUFRLE1BQUFrQixzQkFBQTFCLElBQUFRLE1BQUFHLGdCQUtBaUcsT0FBQWlELGlCQUFBLFNBQUEsU0FBQTVELEdBRUFqRyxJQUFBQyxVQUFBNkUsSUFBQWdELFVBQUFsQixPQUFBQyxXQUVBeEUsUUFBQUMsSUFBQSxVQUFBMkQsRUFBQWpEIiwiZmlsZSI6ImFsbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGpzbGludCBicm93c2VyOnRydWUqL1xuLyogZ2xvYmFsIHdpbmRvdywgJCwgT0F1dGgsIGdvb2dsZSwgSGFuZGxlYmFycywgZG9jdW1lbnQsIGtvKi9cbi8qIGVzbGludCBuby1uZWdhdGVkLWNvbmRpdGlvbjogMiovXG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVzZS1iZWZvcmUtZGVmaW5lKi9cbnZhciBhcHAgPSBhcHAgfHwge307XG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzKi9cbi8qKlxuKiBAZGVzY3JpcHRpb24gLi4uLi5cbiogQGNvbnN0cnVjdG9yXG4qXG4qL1xuZnVuY3Rpb24gZ29vZ2xlU3VjY2VzcygpIHtcbiAga28uYXBwbHlCaW5kaW5ncyhuZXcgYXBwLlZpZXdNb2RlbCgpKTtcbn1cblxuICAvKiogQGRlc2NyaXB0aW9uIGZhbGxiYWNrIGZ1bmN0aW9uXG4gICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSB3aGVuIGRvbmVcbiAgKi9cbmZ1bmN0aW9uIGdvb2dsZUVycm9yKCkge1xuICB2YXIgYWxlcnRtc2cgPSBcIlRoZXJlIGhhcyBiZWVuIGFuIGVycm9yLlwiO1xuICBhbGVydG1zZyArPSBcIlxcblxcblJlZnJlc2ggcGFnZSBhbmQgdGhpcyBlcnJvciBzaG91bGQgZ28gYXdheS5cIjtcbiAgdmFyIGVycm9yUGdDb250ZW50ID0gJzxkaXYgaWQ9XCJjYXJvdXNlbC1leGFtcGxlLWdlbmVyaWNcIiAnICtcbiAgJ2NsYXNzPVwiY2Fyb3VzZWwgc2xpZGVcImRhdGEtcmlkZT1cImNhcm91c2VsXCI+JyArXG4gICc8ZGl2IGNsYXNzPVwiY2Fyb3VzZWwtaW5uZXJcIiByb2xlPVwibGlzdGJveFwiPjxkaXYgY2xhc3M9XCJpdGVtIGFjdGl2ZVwiPicgK1xuICAnPGltZyAgc3JjPVwiaW1nL2dvb2dsZS1tYXAtYXBpLnBuZ1wiIGNsYXNzPVwiaW1nLXJlc3BvbnNpdmUgXCIgJyArXG4gICdhbHQ9XCJSZXNwb25zaXZlIGltYWdlXCIgLz4nICtcbiAgJzxkaXYgY2xhc3M9XCJjYXJvdXNlbC1jYXB0aW9uIHNldC1jYXB0aW9uXCI+PGRpdiAnICtcbiAgJ2NsYXNzPVwiZnVsbC13aWR0aCB0ZXh0LWNlbnRlclwiPjxoMyBjbGFzcz1cImVycm9yXCI+JyArXG4gIGFsZXJ0bXNnLnRvVXBwZXJDYXNlKCkgKyAnPC9oMz48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj4nO1xuXG4gICQoJyN2aWV3JykuaHRtbChlcnJvclBnQ29udGVudCk7XG4gIHJldHVybiAodHJ1ZSk7XG59XG5cbmFwcC5tb2RlbCA9IHtcblxuICBsb2NhdGlvbnM6IFtcblxuICAgIFwiMzIwIFBpb25lZXIgV2F5LCBNb3VudGFpbiBWaWV3LCBDQSA5NDA0MSwgVW5pdGVkIFN0YXRlc1wiLFxuICAgIFwiODAgVyBFbCBDYW1pbm8gUmVhbCwgTW91bnRhaW4gVmlldywgQ0EgOTQwNDAsIFVuaXRlZCBTdGF0ZXNcIixcbiAgICBcIkdyYW50IFBhcmsgUGxhemEsIDEwNDAgR3JhbnQgUm9hZCAjMzUwLCBcIiArXG4gICAgXCJNb3VudGFpbiBWaWV3LCBDQSA5NDA0MCwgVW5pdGVkIFN0YXRlc1wiLFxuICAgIFwiNjM1IFcgRGFuYSBTdCwgTW91bnRhaW4gVmlldywgQ0EgOTQwNDEsIFVuaXRlZCBTdGF0ZXNcIixcbiAgICBcIjUzIFcgRWwgQ2FtaW5vIFJlYWwsIE1vdW50YWluIFZpZXcsIENBIDk0MDQwLCBVbml0ZWQgU3RhdGVzXCIsXG4gICAgXCJHcmFudCBQYXJrIFBsYXphLCAxMDQwIEdyYW50IFJkLCBNb3VudGFpbiBWaWV3LCBDQSA5NDA0MCwgVW5pdGVkIFN0YXRlc1wiLFxuICAgIFwiMTQ1IEUgRGFuYSBTdCwgTW91bnRhaW4gVmlldywgQ0EgOTQwNDEsIFVuaXRlZCBTdGF0ZXNcIixcbiAgICBcIjcwMSBFIEVsIENhbWlubyBSZWFsLCBNb3VudGFpbiBWaWV3LCBDQSA5NDA0MCwgVW5pdGVkIFN0YXRlc1wiLFxuICAgIFwiR3JhbnQgUGFyayBQbGF6YSwgMTM1MCBHcmFudCBSZCBTdWl0ZSA4LCBcIiArXG4gICAgXCJNb3VudGFpbiBWaWV3LCBDQSA5NDA0MCwgVW5pdGVkIFN0YXRlc1wiLFxuICAgIFwiNzUwIENhc3RybyBTdCwgTW91bnRhaW4gVmlldywgQ0EgOTQwNDEsIFVuaXRlZCBTdGF0ZXNcIl0sXG5cbiAgZ29vZ2xlTWFwOiAnPGRpdiBpZD1cIm1hcFwiPjwvZGl2PicsXG4gIGN1cnJlbnRNYXJrZXI6IG51bGwsXG4gIG1hcE9wdGlvbnM6IHtkaXNhYmxlRGVmYXVsdFVJOiB0cnVlfSxcbiAgc2VydmljZTogbnVsbCxcbiAgICAvLyBpbmZvV2luZG93OiBudWxsLFxuICAgIC8qKlxuICAgICogQGRlc2NyaXB0aW9uIGdldCBhbiBpbnN0YW5jZSBvZiB0aGUgaW5mb3JtYXRpb24gd2luZG93IGZvciBlYWNoIG1hcmtlclxuICAgICogQGNvbnN0cnVjdG9yXG4gICAgKi9cbiAgZ2V0SW5mb1dpbmRvdzogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KCk7XG4gIH0sXG4gIGF1dGg6IHtcbiAgICAgIC8vXG4gICAgICAvLyBVcGRhdGUgd2l0aCB5b3VyIGF1dGggdG9rZW5zLlxuICAgICAgLy9cbiAgICBjb25zdW1lcktleTogXCJDY3prQk5Sal9lYW9NZ3FkMG80bjFBXCIsXG4gICAgY29uc3VtZXJTZWNyZXQ6IFwiamZNSGZwSHViR1VaV1JCWFZBalRhVE1ScmJvXCIsXG4gICAgYWNjZXNzVG9rZW46IFwiMElLR0NWVnpvUklwQjJXS1F0RlBZYV9zdFJBbHptWU9cIixcbiAgICAgIC8vIFRoaXMgZXhhbXBsZSBpcyBhIHByb29mIG9mIGNvbmNlcHQsIGZvciBob3cgdG8gdXNlIHRoZSBZZWxwIHYyIEFQSSB3aXRoIGphdmFzY3JpcHQuXG4gICAgICAvLyBZb3Ugd291bGRuJ3QgYWN0dWFsbHkgd2FudCB0byBleHBvc2UgeW91ciBhY2Nlc3MgdG9rZW4gc2VjcmV0IGxpa2UgdGhpcyBpbiBhIHJlYWwgYXBwbGljYXRpb24uXG4gICAgYWNjZXNzVG9rZW5TZWNyZXQ6IFwiSkVvWUlianEyTkpreXdQbzdIQnVfcEc0R2dFXCIsXG4gICAgc2VydmljZVByb3ZpZGVyOiB7c2lnbmF0dXJlTWV0aG9kOiBcIkhNQUMtU0hBMVwifVxuICB9LFxuICAgIC8qXG4gICAgKiBAZGVzY3JpcHRpb24gVGhpcyBpcyB1c2VkIHRvIHNlYXJjaCBmb3IgYSBzcGVjaWZjIHBsYWNlIGJ5IGlkLCBjYWxsZWQgd2hlbiB0aGUgcGxhY2UgbWFya2VyIGlzIGNsaWNrZWQuXG4gICAgKiBAY29uc3RydWN0b3JcbiAgICAqIEBwYXJhbSB7b2JqZWN0fSBNYXJrZXIgc2VsZWN0ZWQgYnkgY2xpY2tcbiAgICAqL1xuICBwbGFjZURldGFpbHNCeVBsYWNlSWQ6IGZ1bmN0aW9uKG1hcmtlcikge1xuICAgICAgLy8gQ3JlYXRlIGFuZCBzZW5kIHRoZSByZXF1ZXN0IHRvIG9idGFpbiBkZXRhaWxzIGZvciBhIHNwZWNpZmljIHBsYWNlLFxuICAgICAgLy8gdXNpbmcgaXRzIFBsYWNlIElELlxuICAgIHZhciBwbGFjZUlkID0gbWFya2VyLnBsYWNlSWQ7XG5cbiAgICB2YXIgcmVxdWVzdCA9IHtwbGFjZUlkOiBwbGFjZUlkfTtcblxuICAgIGFwcC5WaWV3TW9kZWwuc2VydmljZS5nZXREZXRhaWxzKHJlcXVlc3QsIGFwcC5tb2RlbC5wbGFjZUNhbGxCYWNrKTtcbiAgfSxcbiAgICAvKipcbiAgICAqIEBkZXNjcmlwdGlvbiBDYWxsYmFjayBmb3IgdGhlIHNlcnZpY2UgZGV0YWlscyBzZWFyY2ggYnkgaWRcbiAgICAqIEBjb25zdHJ1Y3RvclxuICAgICogQHBhcmFtIHtvYmplY3R9IHBsYWNlIC0gcGxhY2UgcmV0dXJuZWQgYnkgZm91bmQgYnkgcGxhY2UgZGV0YWlscyBzZWFyY2ggYnkgaWRcbiAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdGF0dXMgLSBzdGF0dXMgY29kZSByZXR1cm5lZCBieSBwbGFjZSBkZXRhaWxzIHNlYXJjaCBieSBpZFxuICAgICovXG4gIHBsYWNlQ2FsbEJhY2s6IGZ1bmN0aW9uKHBsYWNlLCBzdGF0dXMpIHtcbiAgICBpZiAoc3RhdHVzID09PSBnb29nbGUubWFwcy5wbGFjZXMuUGxhY2VzU2VydmljZVN0YXR1cy5PSykge1xuICAgICAgY29uc29sZS5sb2coJ3BsYWNlOiAnKTtcbiAgICAgIGNvbnNvbGUubG9nKHBsYWNlKTtcbiAgICAgIGFwcC5tb2RlbC5nZXRZZWxwRGF0YShwbGFjZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHdpbmRvdy5hbGVydCgnRXJyb3IsIFRyeSBBZ2FpbicpO1xuICAgIH1cbiAgfSxcblxuICAgIC8qXG4gICAgKiBAZGVzY3JpcHRpb24gRnVuY3Rpb24gdG8gc2VhcmNoIGZvciBZZWxwIGRhdGEgZm9yIGEgc3BlY2lmaWMgcGxhY2VcbiAgICAqIEBjb25zdHJ1Y3RvclxuICAgICogQHBhcmFtIHtvYmplY3R9IHBsYWNlIC0gcGxhY2UgZm9yIHdoaWNoIFllbHAgZGF0YSBpcyB0byBzZWFyY2hlZCBmb3JcbiAgICAqL1xuICBnZXRZZWxwRGF0YTogZnVuY3Rpb24ocGxhY2UpIHtcbiAgICBjb25zb2xlLmxvZygnYWJvdXQgdG8gcmVxdWVzdCB5ZWxwIGRhdGEnKTtcbiAgICB2YXIgdGVybXMgPSAnYnVzaW5lc3MnO1xuICAgIHZhciBuZWFyID0gcGxhY2UuZm9ybWF0dGVkX2FkZHJlc3M7XG4gICAgdmFyIGxpbWl0ID0gMztcblxuICAgIHZhciBhY2Nlc3NvciA9IHtcbiAgICAgIGNvbnN1bWVyU2VjcmV0OiBhcHAubW9kZWwuYXV0aC5jb25zdW1lclNlY3JldCxcbiAgICAgIHRva2VuU2VjcmV0OiBhcHAubW9kZWwuYXV0aC5hY2Nlc3NUb2tlblNlY3JldFxuICAgIH07XG5cbiAgICB2YXIgcGFyYW1ldGVycyA9IFtdO1xuICAgIHBhcmFtZXRlcnMucHVzaChbJ3Rlcm0nLCB0ZXJtc10pO1xuICAgIHBhcmFtZXRlcnMucHVzaChbJ2xpbWl0JywgbGltaXRdKTtcbiAgICBwYXJhbWV0ZXJzLnB1c2goWydsb2NhdGlvbicsIG5lYXJdKTtcbiAgICBwYXJhbWV0ZXJzLnB1c2goWydjYWxsYmFjaycsICdjYiddKTtcbiAgICBwYXJhbWV0ZXJzLnB1c2goWydvYXV0aF9jb25zdW1lcl9rZXknLCBhcHAubW9kZWwuYXV0aC5jb25zdW1lcktleV0pO1xuICAgIHBhcmFtZXRlcnMucHVzaChbJ29hdXRoX2NvbnN1bWVyX3NlY3JldCcsIGFwcC5tb2RlbC5hdXRoLmNvbnN1bWVyU2VjcmV0XSk7XG4gICAgcGFyYW1ldGVycy5wdXNoKFsnb2F1dGhfdG9rZW4nLCBhcHAubW9kZWwuYXV0aC5hY2Nlc3NUb2tlbl0pO1xuICAgIHBhcmFtZXRlcnMucHVzaChbJ29hdXRoX3NpZ25hdHVyZV9tZXRob2QnLCAnSE1BQy1TSEExJ10pO1xuXG4gICAgdmFyIG1lc3NhZ2UgPSB7XG4gICAgICBhY3Rpb246ICdodHRwOi8vYXBpLnllbHAuY29tL3YyL3NlYXJjaCcsXG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgcGFyYW1ldGVyczogcGFyYW1ldGVyc1xuICAgIH07XG5cbiAgICBPQXV0aC5zZXRUaW1lc3RhbXBBbmROb25jZShtZXNzYWdlKTtcbiAgICBPQXV0aC5TaWduYXR1cmVNZXRob2Quc2lnbihtZXNzYWdlLCBhY2Nlc3Nvcik7XG5cbiAgICB2YXIgcGFyYW1ldGVyTWFwID0gT0F1dGguZ2V0UGFyYW1ldGVyTWFwKG1lc3NhZ2UucGFyYW1ldGVycyk7XG4gICAgcGFyYW1ldGVyTWFwLm9hdXRoX3NpZ25hdHVyZSA9XG4gICAgT0F1dGgucGVyY2VudEVuY29kZShwYXJhbWV0ZXJNYXAub2F1dGhfc2lnbmF0dXJlKTtcblxuICAgIC8vIHRpbWUgb3V0IHllbHAgYXBpIHJlcXVlc3RcbiAgICB2YXIgYXBpVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBhcHAubW9kZWwuaGFuZGxlRXJyb3IoXCJZZWxwIGRhdGEgcmV0cmlldmFsIGVycm9yIVwiKTtcbiAgICB9LCA1MDAwKTtcblxuICAgICQuYWpheCh7XG4gICAgICB1cmw6IG1lc3NhZ2UuYWN0aW9uLFxuICAgICAgZGF0YTogcGFyYW1ldGVyTWFwLFxuICAgICAgY2FjaGU6IHRydWUsXG4gICAgICBkYXRhVHlwZTogJ2pzb25wJyxcbiAgICAgIGpzb25wQ2FsbGJhY2s6ICdjYidcbiAgICB9KS5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgY2xlYXJUaW1lb3V0KGFwaVRpbWVvdXQpO1xuXG4gICAgICB2YXIgc291cmNlID0gJChcIiNtYXJrZXItdGJsLXJvd1wiKS5odG1sKCk7XG4gICAgICB2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoc291cmNlKTtcbiAgICAgIHZhciBidXNpbmVzc2VzID0gZGF0YS5idXNpbmVzc2VzO1xuICAgICAgYnVzaW5lc3Nlcy5uYW1lID0gcGxhY2UubmFtZTtcbiAgICAgIGJ1c2luZXNzZXMuaWNvbiA9IHBsYWNlLmljb247XG4gICAgICB2YXIgaHRtbCA9IHRlbXBsYXRlKGJ1c2luZXNzZXMpO1xuXG4gICAgICB2YXIgdE1hcCA9IGFwcC5WaWV3TW9kZWwubWFwO1xuICAgICAgdmFyIHRDdXJyZW50TWFya2VyID0gYXBwLm1vZGVsLmN1cnJlbnRNYXJrZXI7XG5cbiAgICAgIGFwcC5tb2RlbC5jdXJyZW50TWFya2VyLmluZm9XaW5kb3cuc2V0Q29udGVudChodG1sKTtcbiAgICAgIGNvbnNvbGUubG9nKGFwcC5tb2RlbC5jdXJyZW50TWFya2VyLmluZm9XaW5kb3cpO1xuICAgICAgYXBwLm1vZGVsLmN1cnJlbnRNYXJrZXIuaW5mb1dpbmRvdy5vcGVuKHRNYXAsIHRDdXJyZW50TWFya2VyKTtcbiAgICB9KS5mYWlsKGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzKSB7XG4gICAgICBhcHAubW9kZWwuaGFuZGxlRXJyb3IodGV4dFN0YXR1cyk7XG4gICAgfSk7XG4gIH0sXG4gIC8qKlxuICAqIEBkZXNjcmlwdGlvbiBIYW5kbGVzIGVycm9ycyB0aGF0IG1heSByZXN1bHQgZnJvbSB0aGUgWWVscCBBcGkgcmVxdWVzdFxuICAqIEBjb25zdHJ1Y3RvclxuICAqIEBwYXJhbSB7b2JqZWN0fSBlcnJvciAtIGRldGFpbHMgb2YgdGhlIGVycm9yIHRoYXQgb2NjdXJlZFxuICAqL1xuICBoYW5kbGVFcnJvcjogZnVuY3Rpb24oZXJyb3IpIHtcbiAgICB2YXIgc291cmNlID0gJChcIiN5ZWxwRXJyb3JTY3JpcHRcIikuaHRtbCgpO1xuICAgIHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShzb3VyY2UpO1xuICAgIHZhciBkYXRhID0ge2ltZ1VybDogJ2ltZy93YXJuaW5nLnBuZycsIGVycm9yOiAnRXJyb3I6ICcgK1xuICAgIGVycm9yICsgJyBQbGVhc2UgVHJ5IGFnYWluLid9O1xuICAgIHZhciBodG1sID0gdGVtcGxhdGUoZGF0YSk7XG4gICAgYXBwLm1vZGVsLmN1cnJlbnRNYXJrZXIuaW5mb1dpbmRvdy5zZXRDb250ZW50KGh0bWwpO1xuICAgIGFwcC5tb2RlbC5jdXJyZW50TWFya2VyLmluZm9XaW5kb3dcbiAgICAub3BlbihhcHAuVmlld01vZGVsLm1hcCwgYXBwLm1vZGVsLmN1cnJlbnRNYXJrZXIpO1xuICB9XG5cbn07XG5cbi8qKlxuKiBAZGVzY3JpcHRpb24gVmlld01vZGVsXG4qIEBjb25zdHJ1Y3RvclxuKi9cbmFwcC5WaWV3TW9kZWwgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vIHRpbWVyIHN0YXR1cyB2YXJpYWJsZVxuICBzZWxmLnRpbWVkT3V0ID0gZmFsc2U7XG5cbiAgICAvLyBrbyBvYnNlcnZhYmxlIGFycmF5IHRoYXQgc3RvcmVzIHRoZSBtYXJrZXJzIHVzZWQgdG8gY3JlYXRlIHRoZSBsaXN0IHZpZXcgYW5kIHBvcHVsYXRlIHRoZSBtYXBcbiAgc2VsZi5tYXJrZXJzID0ga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcbiAgJChcIiNtYXBEaXZcIikuYXBwZW5kKGFwcC5tb2RlbC5nb29nbGVNYXApO1xuICAgIC8vIHRyeSBjYXRjaCBzdGF0ZW1lbnQgdXNlZCB0byBpbml0aWF0ZSBmYWxsIGJhY2sgaWYgcmVxdWlyZWRcbiAgdHJ5IHtcbiAgICAvKlxuICAgICAgRm9yIHRoZSBtYXAgdG8gYmUgZGlzcGxheWVkLCB0aGUgZ29vZ2xlTWFwIHZhciBtdXN0IGJlXG4gICAgICBhcHBlbmRlZCB0byAjbWFwRGl2LlxuICAgICovXG4gICAgYXBwLlZpZXdNb2RlbC5tYXAgPVxuICAgIG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCBhcHAubW9kZWwubWFwT3B0aW9ucyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZygnZXJyb3I6ICcgKyBlLm1lc3NhZ2UpO1xuICAgIC8vIHRoaXMgaW5pdGlhdGVzIGZhbGxiYWNrIGFuZCBzdG9wcyB0aGUgaW5pdGlhbCByZXF1ZXN0IGZvciBzdGFydGluZ1xuICAgIHNlbGYuc3RvcCA9IGdvb2dsZUVycm9yKCk7XG4gIH0gZmluYWxseSB7XG5cbiAgfVxuXG4gIC8vIGNyZWF0ZXMgYSBHb29nbGUgcGxhY2Ugc2VhcmNoIHNlcnZpY2Ugb2JqZWN0LiBQbGFjZXNTZXJ2aWNlIGRvZXMgdGhlIHdvcmsgb2ZcbiAgLy8gYWN0dWFsbHkgc2VhcmNoaW5nIGZvciBsb2NhdGlvbiBkYXRhLlxuICBhcHAuVmlld01vZGVsLnNlcnZpY2UgPVxuICBuZXcgZ29vZ2xlLm1hcHMucGxhY2VzLlBsYWNlc1NlcnZpY2UoYXBwLlZpZXdNb2RlbC5tYXApO1xuXG4gIC8qXG4gIEBkZXNjcmlwdGlvbiBjcmVhdGVNYXBNYXJrZXIocGxhY2VEYXRhKSByZWFkcyBHb29nbGUgUGxhY2VzIHNlYXJjaCByZXN1bHRzIHRvIGNyZWF0ZSBtYXAgcGlucy5cbiAgcGxhY2VEYXRhIGlzIHRoZSBvYmplY3QgcmV0dXJuZWQgZnJvbSBzZWFyY2ggcmVzdWx0cyBjb250YWluaW5nIGluZm9ybWF0aW9uXG4gIGFib3V0IGEgc2luZ2xlIGxvY2F0aW9uLlxuICBAcGFyYW0ge29iamVjdH0gcGxhY2VEYXRhIC0gR29vZ2xlIFBsYWNlcyBzZWFyY2ggcmVzdWx0IGRhdGFcbiAgKi9cbiAgYXBwLlZpZXdNb2RlbC5jcmVhdGVNYXBNYXJrZXIgPSBmdW5jdGlvbihwbGFjZURhdGEpIHtcbiAgICAvLyBUaGUgbmV4dCBsaW5lcyBzYXZlIGxvY2F0aW9uIGRhdGEgZnJvbSB0aGUgc2VhcmNoIHJlc3VsdCBvYmplY3QgdG8gbG9jYWwgdmFyaWFibGVzXG4gICAgdmFyIGxhdCA9IHBsYWNlRGF0YS5nZW9tZXRyeS5sb2NhdGlvbi5sYXQoKTsgIC8vIGxhdGl0dWRlIGZyb20gdGhlIHBsYWNlIHNlcnZpY2VcbiAgICB2YXIgbG9uID0gcGxhY2VEYXRhLmdlb21ldHJ5LmxvY2F0aW9uLmxuZygpOyAgLy8gbG9uZ2l0dWRlIGZyb20gdGhlIHBsYWNlIHNlcnZpY2VcbiAgICB2YXIgbmFtZSA9IHBsYWNlRGF0YS5uYW1lOyAgIC8vIG5hbWUgb2YgdGhlIHBsYWNlIGZyb20gdGhlIHBsYWNlIHNlcnZpY2VcbiAgICB2YXIgYm91bmRzID0gd2luZG93Lm1hcEJvdW5kczsgICAgICAgICAgICAvLyBjdXJyZW50IGJvdW5kYXJpZXMgb2YgdGhlIG1hcCB3aW5kb3dcblxuICAgIC8vIG1hcmtlciBpcyBhbiBvYmplY3Qgd2l0aCBhZGRpdGlvbmFsIGRhdGEgYWJvdXQgdGhlIHBpbiBmb3IgYSBzaW5nbGUgbG9jYXRpb25cbiAgICB2YXIgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgICBtYXA6IGFwcC5WaWV3TW9kZWwubWFwLFxuICAgICAgcG9zaXRpb246IHBsYWNlRGF0YS5nZW9tZXRyeS5sb2NhdGlvbixcbiAgICAgIHRpdGxlOiBuYW1lLFxuICAgICAgcGxhY2VJZDogcGxhY2VEYXRhLnBsYWNlX2lkLFxuICAgICAgZHJhZ2dhYmxlOiB0cnVlLFxuICAgICAgYW5pbWF0aW9uOiBnb29nbGUubWFwcy5BbmltYXRpb24uRFJPUFxuICAgICAgLy8gaWNvbjogcGxhY2VEYXRhLmljb25cbiAgICB9KTtcblxuICAvLyBzZXQgYW4gaW5mb1dpbmRvdyBmb3IgZWFjaCBtYXJrZXJcbiAgICBtYXJrZXIuaW5mb1dpbmRvdyA9IGFwcC5tb2RlbC5nZXRJbmZvV2luZG93KCk7XG4gICAgLy8gYWRkIG1hcmtlcnMgdG8gbWFya2VyIGFycmF5XG4gICAgc2VsZi5tYXJrZXJzLnB1c2gobWFya2VyKTtcblxuICAgIC8vIENoZWNrIHRvIHNlZSBpZiBhbGwgaW5pdGlhbCBkYXRhIHdhcyByZWNlaXZlZFxuICAgIGlmIChhcHAubW9kZWwubG9jYXRpb25zLmxlbmd0aCA9PT0gc2VsZi5tYXJrZXJzKCkubGVuZ3RoKSB7XG4gICAgICBzZWxmLnRpbWVkT3V0ID0gZmFsc2U7XG4gICAgICBjbGVhclRpbWVvdXQoc2VsZi5yZXF1ZXN0VGltZXIpO1xuICAgICAgY29uc29sZS5sb2coJ3RpbWVyIHJlc2V0Jyk7XG4gICAgfVxuXG4gICAgICAvLyBhZGQgbGlzdGVuZXIgdG8gcmVzcG9uZCB0byBjbGljayBldmVudHMgb24gbWFya2Vyc1xuICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlciwgJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoYXBwLm1vZGVsLmN1cnJlbnRNYXJrZXIgIT09IG51bGwgJiZcbiAgICAgICAgYXBwLm1vZGVsLmN1cnJlbnRNYXJrZXIuaW5mb1dpbmRvdyAhPT0gbnVsbCkge1xuICAgICAgICBhcHAubW9kZWwuY3VycmVudE1hcmtlci5pbmZvV2luZG93LmNsb3NlKCk7XG4gICAgICB9XG5cbiAgICAgIGFwcC5tb2RlbC5jdXJyZW50TWFya2VyID0gbnVsbDtcbiAgICAgIGFwcC5tb2RlbC5jdXJyZW50TWFya2VyID0gbWFya2VyO1xuICAgICAgYXBwLm1vZGVsLnBsYWNlRGV0YWlsc0J5UGxhY2VJZChhcHAubW9kZWwuY3VycmVudE1hcmtlcik7XG4gICAgfSk7XG4gIC8vIGFkZCBsaXN0ZW5lciB0byB0cmlnZ2VyIGJvdW5jZSBhbmltYXRpb24gZm9yIG1hcmtlciBpY29uIGFmdGVyIHRoZXkgaGF2ZSBiZWVuIGNsaWNrZWRcbiAgICBtYXJrZXIuYWRkTGlzdGVuZXIoJ2NsaWNrJywgYXBwLlZpZXdNb2RlbC50b2dnbGVCb3VuY2UpO1xuXG4gICAgLy8gdGhpcyBpcyB3aGVyZSB0aGUgcGluIGFjdHVhbGx5IGdldHMgYWRkZWQgdG8gdGhlIG1hcC5cbiAgICAvLyBib3VuZHMuZXh0ZW5kKCkgdGFrZXMgaW4gYSBtYXAgbG9jYXRpb24gb2JqZWN0XG4gICAgYm91bmRzLmV4dGVuZChuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGxhdCwgbG9uKSk7XG4gICAgLy8gZml0IHRoZSBtYXAgdG8gdGhlIG5ldyBtYXJrZXJcbiAgICBhcHAuVmlld01vZGVsLm1hcC5maXRCb3VuZHMoYm91bmRzKTtcbiAgICAvLyBjZW50ZXIgdGhlIG1hcFxuICAgIGFwcC5WaWV3TW9kZWwubWFwLnNldENlbnRlcihib3VuZHMuZ2V0Q2VudGVyKCkpO1xuICB9O1xuXG4gICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBBbmltYXRlcyBzZWxlY3RlZCBtYXJrZXIgd2l0aCBhIGJvdW5jZSBhbmltYXRpb25cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgYXBwLlZpZXdNb2RlbC50b2dnbGVCb3VuY2UgPSBmdW5jdGlvbigpIHtcbiAgICBzZWxmLm1hcmtlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uKG1hcmspIHtcbiAgICAgIG1hcmsuc2V0QW5pbWF0aW9uKG51bGwpO1xuICAgIH0pO1xuXG4gICAgYXBwLm1vZGVsLmN1cnJlbnRNYXJrZXIuc2V0QW5pbWF0aW9uKGdvb2dsZS5tYXBzLkFuaW1hdGlvbi5CT1VOQ0UpO1xuICB9O1xuXG4gIC8qXG4gICogQGRlc2NyaXB0aW9uIGNhbGxiYWNrKHJlc3VsdHMsIHN0YXR1cykgbWFrZXMgc3VyZSB0aGUgc2VhcmNoIHJldHVybmVkIHJlc3VsdHMgZm9yIGEgbG9jYXRpb24uXG4gIElmIHNvLCBpdCBjcmVhdGVzIGEgbmV3IG1hcCBtYXJrZXIgZm9yIHRoYXQgbG9jYXRpb24uXG4gICogQHBhcmFtIHtvYmplY3R9IHJlc3VsdHMgLSBzZWFyY2ggcmV0dXJuZWQgcmVzdWx0cyBmb3IgYSBsb2NhdGlvblxuICAqIEBwYXJhbSB7c3RyaW5nfSBzdGF0dXMgLSBwbGFjZXMgYXBpIHJlcXVlc3Qgc3RhdHVzXG4gICovXG4gIHNlbGYuY2FsbGJhY2sgPSBmdW5jdGlvbihyZXN1bHRzLCBzdGF0dXMpIHtcbiAgICBjb25zb2xlLmxvZygnaW4gY2FsbGJhY2snKTtcblxuICAgIGlmIChzdGF0dXMgPT09IGdvb2dsZS5tYXBzLnBsYWNlcy5QbGFjZXNTZXJ2aWNlU3RhdHVzLk9LKSB7XG4gICAgICBhcHAuVmlld01vZGVsLmNyZWF0ZU1hcE1hcmtlcihyZXN1bHRzWzBdKTtcblxuICAgICAgdmFyIHBsYWNlID0gcmVzdWx0c1swXTtcbiAgICAgIGNvbnNvbGUubG9nKHBsYWNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gd2luZG93LmFsZXJ0KCdFcnJvciwgVHJ5IEFnYWluJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9O1xuXG4gIC8qXG4gICogQGRlc2NyaXB0aW9uIHBpblBvc3Rlcihsb2NhdGlvbnMpIHRha2VzIGluIHRoZSBhcnJheSBvZiBsb2NhdGlvbnMgY3JlYXRlZCBieSBsb2NhdGlvbkZpbmRlcigpXG4gIGFuZCBmaXJlcyBvZmYgR29vZ2xlIHBsYWNlIHNlYXJjaGVzIGZvciBlYWNoIGxvY2F0aW9uXG4gICovXG4gIHRoaXMucGluUG9zdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gSXRlcmF0ZXMgdGhyb3VnaCB0aGUgYXJyYXkgb2YgbG9jYXRpb25zLCBjcmVhdGVzIGEgc2VhcmNoIG9iamVjdCBmb3IgZWFjaCBsb2NhdGlvblxuICAgIGFwcC5tb2RlbC5sb2NhdGlvbnMuZm9yRWFjaChmdW5jdGlvbihwbGFjZSkge1xuICAgICAgLy8gdGhlIHNlYXJjaCByZXF1ZXN0IG9iamVjdFxuICAgICAgdmFyIHJlcXVlc3QgPSB7cXVlcnk6IHBsYWNlfTtcblxuICAgICAgLy8gQWN0dWFsbHkgc2VhcmNoZXMgdGhlIEdvb2dsZSBNYXBzIEFQSSBmb3IgbG9jYXRpb24gZGF0YSBhbmQgcnVucyB0aGUgY2FsbGJhY2tcbiAgICAgIC8vIGZ1bmN0aW9uIHdpdGggdGhlIHNlYXJjaCByZXN1bHRzIGFmdGVyIGVhY2ggc2VhcmNoLlxuICAgICAgYXBwLlZpZXdNb2RlbC5zZXJ2aWNlLnRleHRTZWFyY2gocmVxdWVzdCwgc2VsZi5jYWxsYmFjayk7XG4gICAgfSk7XG4gIH07XG5cbiAgICAvLyBTZXRzIHRoZSBib3VuZGFyaWVzIG9mIHRoZSBtYXAgYmFzZWQgb24gcGluIGxvY2F0aW9uc1xuICB3aW5kb3cubWFwQm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcygpO1xuXG4gIC8vIHRpbWVyIGZvciBmYWxsYmFjayBpbiBjYXNlIHJlcXVlc3RzIGFyZSB0YWtpbmcgdG9vIGxvbmdcbiAgc2VsZi5yZXF1ZXN0VGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgIHNlbGYudGltZWRPdXQgPSB0cnVlO1xuICAgIGNvbnNvbGUubG9nKCdSZXF1ZXN0IHRpbWVkIG91dC4nKTtcbiAgICBnb29nbGVFcnJvcigpO1xuICB9LCAxMDAwMCk7XG5cbiAgLy8gcGluUG9zdGVyKGxvY2F0aW9ucykgY3JlYXRlcyBwaW5zIG9uIHRoZSBtYXAgZm9yIGVhY2ggbG9jYXRpb24gaW5cbiAgLy8gdGhlIGxvY2F0aW9ucyBhcnJheVxuICAvLyB0aGUgaWYgc3RhdGVtZW50IGNoZWNrcyB0byBzZWUgaWYgaXRzIG9rIHRvIHByb2NlZWQgd2l0aCB0aGUgcmVxdWVzdCBmb3IgdGhlIGluaXRpYWwgZGF0YSBmb3IgdGhlIG1hcCBsb2NhdGlvbnNcbiAgLy8gaWYgKCFzZWxmLnN0b3ApIHtcbiAgc2VsZi5waW5Qb3N0ZXIoKTtcbiAgLy8gfVxuXG4gIC8qIEBkZXNjcmlwdGlvbiBhZGQgYmFjayBtYXJrZXQgdG8gbWFwXG4gICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IC0gcG9zaXRpb24gb2YgbWFya2VyIGluIG1hcmtlcnMgYXJyYXlcbiAgKiBAcGFyYW0ge29iamVjdH0gbWFwIC0gbWFwIG9iamVjdFxuICAqL1xuICBzZWxmLmFkZE1hcmtlciA9IGZ1bmN0aW9uKGluZGV4LCBtYXApIHtcbiAgICBzZWxmLm1hcmtlcnMoKVtpbmRleF0uc2V0TWFwKG1hcCk7XG4gIH07XG5cbiAgICAvKiBAZGVzY3JpcHRpb24gU2V0cyB0aGUgbWFwIG9uIGFsbCBtYXJrZXJzIGluIHRoZSBhcnJheS5cbiAgICAqIEBwYXJhbSB7b2JqZWN0fSBtYXAgLSBtYXAgb2JqZWN0XG4gICAgKi9cbiAgc2VsZi5zZXRNYXBPbkFsbCA9IGZ1bmN0aW9uKG1hcCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5tYXJrZXJzKCkubGVuZ3RoOyBpKyspIHtcbiAgICAgIHNlbGYubWFya2VycygpW2ldLnNldE1hcChtYXApO1xuICAgIH1cbiAgfTtcblxuICAgIC8qIEBkZXNjcmlwdGlvbiBGaWx0ZXJzIG1hcmtlcnMgYXJyYXkgLlxuICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbHRlciAtIHN0cmluZyB1c2VkIHRvIGZpbHRlciBtYXJrZXJzIGFycmF5XG4gICAgKi9cbiAgc2VsZi5maWx0ZXJNYXJrZXJzID0gZnVuY3Rpb24oZmlsdGVyKSB7XG4gICAgc2VsZi5zZXRNYXBPbkFsbChudWxsKTtcblxuICAgIHNlbGYubWFya2VycygpLmZvckVhY2goZnVuY3Rpb24obWFya2VyLCBpbmRleCkge1xuICAgICAgdmFyIG1hcmtlclN0ciA9IG1hcmtlci50aXRsZTtcbiAgICAgIGlmICghZmlsdGVyKSB7XG4gICAgICAgIHNlbGYuc2V0TWFwT25BbGwoYXBwLlZpZXdNb2RlbC5tYXApO1xuICAgICAgfVxuXG4gICAgICBpZiAobWFya2VyU3RyLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihmaWx0ZXIpICE9PSAtMSkge1xuICAgICAgICBzZWxmLmFkZE1hcmtlcihpbmRleCwgYXBwLlZpZXdNb2RlbC5tYXApO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIC8vIGtvIG9ic2VydmFibGUgdGhhdCBjb2xsZWN0cyB0aGUgZmlsdGVyIGZyb20gdGhlIGh0bWwgaW5wdXQgZWxlbWVudFxuICBzZWxmLmZpbHRlciA9IGtvLm9ic2VydmFibGUoXCJcIik7XG4gIHNlbGYuaW5pdGlhbGl6ZSA9IHRydWU7XG5cbiAgLy8ga28gY29tcHV0ZWQgb2JzZXJ2YWJsZSB0aGF0IHdpbGwgZmlsdGVyIHRoZSBtYXJrZXJzIG9ic2VydmFibGUgYXJyYXkgYmFzZWQgb24gdGhlIGZpbHRlciBpbnB1dFxuICBzZWxmLmZpbHRlcmVkSXRlbXMgPSBrby5jb21wdXRlZChmdW5jdGlvbigpIHtcbiAgICB2YXIgZmlsdGVyID0gc2VsZi5maWx0ZXIoKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgaWYgKGZpbHRlcikge1xuICAgICAgc2VsZi5maWx0ZXJNYXJrZXJzKGZpbHRlcik7XG4gICAgICByZXR1cm4ga28udXRpbHMuYXJyYXlGaWx0ZXIoc2VsZi5tYXJrZXJzKCksIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0udGl0bGUudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbHRlcikgIT09IC0xO1xuICAgICAgfSk7XG4gICAgLy8gfSBlbHNlIHtcbiAgICAvLyAgIHNlbGYuZmlsdGVyTWFya2VycyhmaWx0ZXIpO1xuICAgIC8vICAgcmV0dXJuIHNlbGYubWFya2VycygpO1xuICAgIH1cbiAgICBzZWxmLmZpbHRlck1hcmtlcnMoZmlsdGVyKTtcbiAgICByZXR1cm4gc2VsZi5tYXJrZXJzKCk7XG4gIH0pO1xuXG4gICAvKiBAZGVzY3JpcHRpb24gUmVxdWVzdCBwbGFjZSBkZXRhaWxzIGZvciB0aGUgY3VycmVudCBtYXJrZXIgc2VsZWN0ZWQgdmlhIGxpc3QuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBtYXJrZXIgLSBtYXJrZXIgc2VsZWN0ZWQgZnJvbSBsaXN0IHZpZXdcbiAgICovXG4gIHRoaXMuc2hvd0luZm93aW5kb3cgPSBmdW5jdGlvbihtYXJrZXIpIHtcbiAgICBpZiAoYXBwLm1vZGVsLmN1cnJlbnRNYXJrZXIgIT09IG51bGwgJiZcbiAgICAgIGFwcC5tb2RlbC5jdXJyZW50TWFya2VyLmluZm9XaW5kb3cgIT09IG51bGwpIHtcbiAgICAgIGFwcC5tb2RlbC5jdXJyZW50TWFya2VyLmluZm9XaW5kb3cuY2xvc2UoKTtcbiAgICB9XG4gICAgc2VsZi5maWx0ZXIoJycpO1xuXG4gICAgYXBwLm1vZGVsLmN1cnJlbnRNYXJrZXIgPSBudWxsO1xuICAgIGFwcC5tb2RlbC5jdXJyZW50TWFya2VyID0gbWFya2VyO1xuICAgIGFwcC5WaWV3TW9kZWwudG9nZ2xlQm91bmNlKCk7XG4gICAgYXBwLm1vZGVsLnBsYWNlRGV0YWlsc0J5UGxhY2VJZChhcHAubW9kZWwuY3VycmVudE1hcmtlcik7XG4gIH07XG5cbiAgICAvLyBAZGVzY3JpcHRpb24gVmFuaWxsYSBKUyB3YXkgdG8gbGlzdGVuIGZvciByZXNpemluZyBvZiB0aGUgd2luZG93XG4gICAgLy8gYW5kIGFkanVzdCBtYXAgYm91bmRzXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbihlKSB7XG4gICAgLy8gTWFrZSBzdXJlIHRoZSBtYXAgYm91bmRzIGdldCB1cGRhdGVkIG9uIHBhZ2UgcmVzaXplXG4gICAgYXBwLlZpZXdNb2RlbC5tYXAuZml0Qm91bmRzKHdpbmRvdy5tYXBCb3VuZHMpO1xuICAgICAvLyBhcHAuVmlld01vZGVsLm1hcC5wYW5UbyhwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbik7XG4gICAgY29uc29sZS5sb2coJ3Jlc2l6ZWQnICsgZS5tZXNzYWdlKTtcbiAgfSk7XG59O1xuXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
