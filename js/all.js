function googleSuccess(){ko.applyBindings(new app.ViewModel)}function googleError(){var e="There has been an error.";e+="\n\nRefresh page and this error should go away.";var a='<div id="carousel-example-generic" class="carousel slide"data-ride="carousel"><div class="carousel-inner" role="listbox"><div class="item active"><img  src="img/google-map-api.png" class="img-responsive " alt="Responsive image" /><div class="carousel-caption set-caption"><div class="full-width text-center"><h3 class="error">'+e.toUpperCase()+"</h3></div></div></div></div>";return $("#view").html(a),!0}var app=app||{};app.model={locations:["320 Pioneer Way, Mountain View, CA 94041, United States","80 W El Camino Real, Mountain View, CA 94040, United States","Grant Park Plaza, 1040 Grant Road #350, Mountain View, CA 94040, United States","635 W Dana St, Mountain View, CA 94041, United States","53 W El Camino Real, Mountain View, CA 94040, United States","Grant Park Plaza, 1040 Grant Rd, Mountain View, CA 94040, United States","145 E Dana St, Mountain View, CA 94041, United States","701 E El Camino Real, Mountain View, CA 94040, United States","Grant Park Plaza, 1350 Grant Rd Suite 8, Mountain View, CA 94040, United States","750 Castro St, Mountain View, CA 94041, United States"],googleMap:'<div id="map"></div>',currentMarker:null,mapOptions:{disableDefaultUI:!0},service:null,getInfoWindow:function(){return new google.maps.InfoWindow},auth:{consumerKey:"CczkBNRj_eaoMgqd0o4n1A",consumerSecret:"jfMHfpHubGUZWRBXVAjTaTMRrbo",accessToken:"0IKGCVVzoRIpB2WKQtFPYa_stRAlzmYO",accessTokenSecret:"JEoYIbjq2NJkywPo7HBu_pG4GgE",serviceProvider:{signatureMethod:"HMAC-SHA1"}},placeDetailsByPlaceId:function(e){var a=e.placeId,o={placeId:a};app.ViewModel.service.getDetails(o,app.model.placeCallBack)},placeCallBack:function(e,a){a===google.maps.places.PlacesServiceStatus.OK&&(console.log("place: "),console.log(e),app.model.getYelpData(e))},getYelpData:function(e){console.log("about to request yelp data");var a="business",o=e.formatted_address,r=3,t={consumerSecret:app.model.auth.consumerSecret,tokenSecret:app.model.auth.accessTokenSecret},n=[];n.push(["term",a]),n.push(["limit",r]),n.push(["location",o]),n.push(["callback","cb"]),n.push(["oauth_consumer_key",app.model.auth.consumerKey]),n.push(["oauth_consumer_secret",app.model.auth.consumerSecret]),n.push(["oauth_token",app.model.auth.accessToken]),n.push(["oauth_signature_method","HMAC-SHA1"]);var l={action:"http://api.yelp.com/v2/search",method:"GET",parameters:n};OAuth.setTimestampAndNonce(l),OAuth.SignatureMethod.sign(l,t);var i=OAuth.getParameterMap(l.parameters);i.oauth_signature=OAuth.percentEncode(i.oauth_signature);var p=setTimeout(function(){app.model.handleError("Yelp data retrieval error!")},5e3);$.ajax({url:l.action,data:i,cache:!0,dataType:"jsonp",jsonpCallback:"cb"}).done(function(a){console.log(a),clearTimeout(p);var o=$("#marker-tbl-row").html(),r=Handlebars.compile(o),t=a.businesses;t.name=e.name,t.icon=e.icon;var n=r(t),l=app.ViewModel.map,i=app.model.currentMarker;app.model.currentMarker.infoWindow.setContent(n),console.log(app.model.currentMarker.infoWindow),app.model.currentMarker.infoWindow.open(l,i)}).fail(function(e,a){app.model.handleError(a)})},handleError:function(e){var a=$("#yelpErrorScript").html(),o=Handlebars.compile(a),r={imgUrl:"img/warning.png",error:"Error: "+e+" Please Try again."},t=o(r);app.model.currentMarker.infoWindow.setContent(t),app.model.currentMarker.infoWindow.open(app.ViewModel.map,app.model.currentMarker)}},app.ViewModel=function(){var e=this;e.timedOut=!1,e.markers=ko.observableArray([]),$("#mapDiv").append(app.model.googleMap);try{app.ViewModel.map=new google.maps.Map(document.getElementById("map"),app.model.mapOptions)}catch(a){console.log("error: "+a.message),e.stop=googleError()}finally{}app.ViewModel.service=new google.maps.places.PlacesService(app.ViewModel.map),app.ViewModel.createMapMarker=function(a){var o=a.geometry.location.lat(),r=a.geometry.location.lng(),t=a.name,n=window.mapBounds,l=new google.maps.Marker({map:app.ViewModel.map,position:a.geometry.location,title:t,placeId:a.place_id,draggable:!0,animation:google.maps.Animation.DROP});l.infoWindow=app.model.getInfoWindow(),e.markers.push(l),app.model.locations.length===e.markers().length&&(e.timedOut=!1,clearTimeout(e.requestTimer),console.log("timer reset")),google.maps.event.addListener(l,"click",function(){null!==app.model.currentMarker&&null!==app.model.currentMarker.infoWindow&&app.model.currentMarker.infoWindow.close(),app.model.currentMarker=null,app.model.currentMarker=l,app.model.placeDetailsByPlaceId(app.model.currentMarker)}),l.addListener("click",app.ViewModel.toggleBounce),n.extend(new google.maps.LatLng(o,r)),app.ViewModel.map.fitBounds(n),app.ViewModel.map.setCenter(n.getCenter())},app.ViewModel.toggleBounce=function(){e.markers().forEach(function(e){e.setAnimation(null)}),app.model.currentMarker.setAnimation(google.maps.Animation.BOUNCE)},e.callback=function(e,a){if(console.log("in callback"),a===google.maps.places.PlacesServiceStatus.OK){app.ViewModel.createMapMarker(e[0]);var o=e[0];console.log(o)}},this.pinPoster=function(){app.model.locations.forEach(function(a){var o={query:a};app.ViewModel.service.textSearch(o,e.callback)})},window.mapBounds=new google.maps.LatLngBounds,e.requestTimer=setTimeout(function(){e.timedOut=!0,console.log("Request timed out."),googleError()},1e4),e.pinPoster(),e.addMarker=function(a,o){e.markers()[a].setMap(o)},e.setMapOnAll=function(a){for(var o=0;o<e.markers().length;o++)e.markers()[o].setMap(a)},e.filterMarkers=function(a){e.setMapOnAll(null),e.markers().forEach(function(o,r){var t=o.title;a||e.setMapOnAll(app.ViewModel.map),-1!==t.toLowerCase().indexOf(a)&&e.addMarker(r,app.ViewModel.map)})},e.filter=ko.observable(""),e.initialize=!0,e.filteredItems=ko.computed(function(){var a=e.filter().toLowerCase();return a?(e.filterMarkers(a),ko.utils.arrayFilter(e.markers(),function(e){return-1!==e.title.toLowerCase().indexOf(a)})):(e.filterMarkers(a),e.markers())}),this.showInfowindow=function(a){null!==app.model.currentMarker&&null!==app.model.currentMarker.infoWindow&&app.model.currentMarker.infoWindow.close(),e.filter(""),app.model.currentMarker=null,app.model.currentMarker=a,app.ViewModel.toggleBounce(),app.model.placeDetailsByPlaceId(app.model.currentMarker)},window.addEventListener("resize",function(e){app.ViewModel.map.fitBounds(window.mapBounds),app.ViewModel.map.setCenter(bounds.getCenter()),console.log("resized"+e.message)})};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJnb29nbGVTdWNjZXNzIiwia28iLCJhcHBseUJpbmRpbmdzIiwiYXBwIiwiVmlld01vZGVsIiwiZ29vZ2xlRXJyb3IiLCJhbGVydG1zZyIsImVycm9yUGdDb250ZW50IiwidG9VcHBlckNhc2UiLCIkIiwiaHRtbCIsIm1vZGVsIiwibG9jYXRpb25zIiwiZ29vZ2xlTWFwIiwiY3VycmVudE1hcmtlciIsIm1hcE9wdGlvbnMiLCJkaXNhYmxlRGVmYXVsdFVJIiwic2VydmljZSIsImdldEluZm9XaW5kb3ciLCJnb29nbGUiLCJtYXBzIiwiSW5mb1dpbmRvdyIsImF1dGgiLCJjb25zdW1lcktleSIsImNvbnN1bWVyU2VjcmV0IiwiYWNjZXNzVG9rZW4iLCJhY2Nlc3NUb2tlblNlY3JldCIsInNlcnZpY2VQcm92aWRlciIsInNpZ25hdHVyZU1ldGhvZCIsInBsYWNlRGV0YWlsc0J5UGxhY2VJZCIsIm1hcmtlciIsInBsYWNlSWQiLCJyZXF1ZXN0IiwiZ2V0RGV0YWlscyIsInBsYWNlQ2FsbEJhY2siLCJwbGFjZSIsInN0YXR1cyIsInBsYWNlcyIsIlBsYWNlc1NlcnZpY2VTdGF0dXMiLCJPSyIsImNvbnNvbGUiLCJsb2ciLCJnZXRZZWxwRGF0YSIsInRlcm1zIiwibmVhciIsImZvcm1hdHRlZF9hZGRyZXNzIiwibGltaXQiLCJhY2Nlc3NvciIsInRva2VuU2VjcmV0IiwicGFyYW1ldGVycyIsInB1c2giLCJtZXNzYWdlIiwiYWN0aW9uIiwibWV0aG9kIiwiT0F1dGgiLCJzZXRUaW1lc3RhbXBBbmROb25jZSIsIlNpZ25hdHVyZU1ldGhvZCIsInNpZ24iLCJwYXJhbWV0ZXJNYXAiLCJnZXRQYXJhbWV0ZXJNYXAiLCJvYXV0aF9zaWduYXR1cmUiLCJwZXJjZW50RW5jb2RlIiwiYXBpVGltZW91dCIsInNldFRpbWVvdXQiLCJoYW5kbGVFcnJvciIsImFqYXgiLCJ1cmwiLCJkYXRhIiwiY2FjaGUiLCJkYXRhVHlwZSIsImpzb25wQ2FsbGJhY2siLCJkb25lIiwiY2xlYXJUaW1lb3V0Iiwic291cmNlIiwidGVtcGxhdGUiLCJIYW5kbGViYXJzIiwiY29tcGlsZSIsImJ1c2luZXNzZXMiLCJuYW1lIiwiaWNvbiIsInRNYXAiLCJtYXAiLCJ0Q3VycmVudE1hcmtlciIsImluZm9XaW5kb3ciLCJzZXRDb250ZW50Iiwib3BlbiIsImZhaWwiLCJqcVhIUiIsInRleHRTdGF0dXMiLCJlcnJvciIsImltZ1VybCIsInNlbGYiLCJ0aGlzIiwidGltZWRPdXQiLCJtYXJrZXJzIiwib2JzZXJ2YWJsZUFycmF5IiwiYXBwZW5kIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImUiLCJzdG9wIiwiUGxhY2VzU2VydmljZSIsImNyZWF0ZU1hcE1hcmtlciIsInBsYWNlRGF0YSIsImxhdCIsImdlb21ldHJ5IiwibG9jYXRpb24iLCJsb24iLCJsbmciLCJib3VuZHMiLCJ3aW5kb3ciLCJtYXBCb3VuZHMiLCJNYXJrZXIiLCJwb3NpdGlvbiIsInRpdGxlIiwicGxhY2VfaWQiLCJkcmFnZ2FibGUiLCJhbmltYXRpb24iLCJBbmltYXRpb24iLCJEUk9QIiwibGVuZ3RoIiwicmVxdWVzdFRpbWVyIiwiZXZlbnQiLCJhZGRMaXN0ZW5lciIsImNsb3NlIiwidG9nZ2xlQm91bmNlIiwiZXh0ZW5kIiwiTGF0TG5nIiwiZml0Qm91bmRzIiwic2V0Q2VudGVyIiwiZ2V0Q2VudGVyIiwiZm9yRWFjaCIsIm1hcmsiLCJzZXRBbmltYXRpb24iLCJCT1VOQ0UiLCJjYWxsYmFjayIsInJlc3VsdHMiLCJwaW5Qb3N0ZXIiLCJxdWVyeSIsInRleHRTZWFyY2giLCJMYXRMbmdCb3VuZHMiLCJhZGRNYXJrZXIiLCJpbmRleCIsInNldE1hcCIsInNldE1hcE9uQWxsIiwiaSIsImZpbHRlck1hcmtlcnMiLCJmaWx0ZXIiLCJtYXJrZXJTdHIiLCJ0b0xvd2VyQ2FzZSIsImluZGV4T2YiLCJvYnNlcnZhYmxlIiwiaW5pdGlhbGl6ZSIsImZpbHRlcmVkSXRlbXMiLCJjb21wdXRlZCIsInV0aWxzIiwiYXJyYXlGaWx0ZXIiLCJpdGVtIiwic2hvd0luZm93aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIl0sIm1hcHBpbmdzIjoiQUFhQSxRQUFBQSxpQkFDQUMsR0FBQUMsY0FBQSxHQUFBQyxLQUFBQyxXQU1BLFFBQUFDLGVBQ0EsR0FBQUMsR0FBQSwwQkFDQUEsSUFBQSxpREFDQSxJQUFBQyxHQUFBLHlVQU9BRCxFQUFBRSxjQUFBLCtCQUdBLE9BREFDLEdBQUEsU0FBQUMsS0FBQUgsSUFDQSxFQTVCQSxHQUFBSixLQUFBQSxPQStCQUEsS0FBQVEsT0FFQUMsV0FFQSwwREFDQSw4REFDQSxpRkFFQSx3REFDQSw4REFDQSwwRUFDQSx3REFDQSwrREFDQSxrRkFFQSx5REFFQUMsVUFBQSx1QkFDQUMsY0FBQSxLQUNBQyxZQUFBQyxrQkFBQSxHQUNBQyxRQUFBLEtBTUFDLGNBQUEsV0FDQSxNQUFBLElBQUFDLFFBQUFDLEtBQUFDLFlBRUFDLE1BSUFDLFlBQUEseUJBQ0FDLGVBQUEsOEJBQ0FDLFlBQUEsbUNBR0FDLGtCQUFBLDhCQUNBQyxpQkFBQUMsZ0JBQUEsY0FPQUMsc0JBQUEsU0FBQUMsR0FHQSxHQUFBQyxHQUFBRCxFQUFBQyxRQUVBQyxHQUFBRCxRQUFBQSxFQUVBNUIsS0FBQUMsVUFBQWEsUUFBQWdCLFdBQUFELEVBQUE3QixJQUFBUSxNQUFBdUIsZ0JBUUFBLGNBQUEsU0FBQUMsRUFBQUMsR0FDQUEsSUFBQWpCLE9BQUFDLEtBQUFpQixPQUFBQyxvQkFBQUMsS0FDQUMsUUFBQUMsSUFBQSxXQUNBRCxRQUFBQyxJQUFBTixHQUNBaEMsSUFBQVEsTUFBQStCLFlBQUFQLEtBV0FPLFlBQUEsU0FBQVAsR0FDQUssUUFBQUMsSUFBQSw2QkFDQSxJQUFBRSxHQUFBLFdBQ0FDLEVBQUFULEVBQUFVLGtCQUNBQyxFQUFBLEVBRUFDLEdBQ0F2QixlQUFBckIsSUFBQVEsTUFBQVcsS0FBQUUsZUFDQXdCLFlBQUE3QyxJQUFBUSxNQUFBVyxLQUFBSSxtQkFHQXVCLElBQ0FBLEdBQUFD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LEVBQUFHLGFBTUFGLEtBQUFtRSxlQUFBLFNBQUFqSSxHQUNBLE9BQUEzQixJQUFBUSxNQUFBRyxlQUNBLE9BQUFYLElBQUFRLE1BQUFHLGNBQUFxRSxZQUNBaEYsSUFBQVEsTUFBQUcsY0FBQXFFLFdBQUEwQyxRQUVBbEMsRUFBQXlELE9BQUEsSUFFQWpKLElBQUFRLE1BQUFHLGNBQUEsS0FDQVgsSUFBQVEsTUFBQUcsY0FBQWdCLEVBQ0EzQixJQUFBQyxVQUFBMEgsZUFDQTNILElBQUFRLE1BQUFrQixzQkFBQTFCLElBQUFRLE1BQUFHLGdCQUtBaUcsT0FBQWlELGlCQUFBLFNBQUEsU0FBQTVELEdBRUFqRyxJQUFBQyxVQUFBNkUsSUFBQWdELFVBQUFsQixPQUFBQyxXQUVBN0csSUFBQUMsVUFBQTZFLElBQUFpRCxVQUFBcEIsT0FBQXFCLGFBRUEzRixRQUFBQyxJQUFBLFVBQUEyRCxFQUFBakQiLCJmaWxlIjoiYWxsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoganNsaW50IGJyb3dzZXI6dHJ1ZSovXG4vKiBnbG9iYWwgd2luZG93LCAkLCBPQXV0aCwgZ29vZ2xlLCBIYW5kbGViYXJzLCBkb2N1bWVudCwga28qL1xuLyogZXNsaW50IG5vLW5lZ2F0ZWQtY29uZGl0aW9uOiAyKi9cblxuLyogZXNsaW50LWRpc2FibGUgbm8tdXNlLWJlZm9yZS1kZWZpbmUqL1xudmFyIGFwcCA9IGFwcCB8fCB7fTtcblxuLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMqL1xuLyoqXG4qIEBkZXNjcmlwdGlvbiAuLi4uLlxuKiBAY29uc3RydWN0b3JcbipcbiovXG5mdW5jdGlvbiBnb29nbGVTdWNjZXNzKCkge1xuICBrby5hcHBseUJpbmRpbmdzKG5ldyBhcHAuVmlld01vZGVsKCkpO1xufVxuXG4gIC8qKiBAZGVzY3JpcHRpb24gZmFsbGJhY2sgZnVuY3Rpb25cbiAgKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIHdoZW4gZG9uZVxuICAqL1xuZnVuY3Rpb24gZ29vZ2xlRXJyb3IoKSB7XG4gIHZhciBhbGVydG1zZyA9IFwiVGhlcmUgaGFzIGJlZW4gYW4gZXJyb3IuXCI7XG4gIGFsZXJ0bXNnICs9IFwiXFxuXFxuUmVmcmVzaCBwYWdlIGFuZCB0aGlzIGVycm9yIHNob3VsZCBnbyBhd2F5LlwiO1xuICB2YXIgZXJyb3JQZ0NvbnRlbnQgPSAnPGRpdiBpZD1cImNhcm91c2VsLWV4YW1wbGUtZ2VuZXJpY1wiICcgK1xuICAnY2xhc3M9XCJjYXJvdXNlbCBzbGlkZVwiZGF0YS1yaWRlPVwiY2Fyb3VzZWxcIj4nICtcbiAgJzxkaXYgY2xhc3M9XCJjYXJvdXNlbC1pbm5lclwiIHJvbGU9XCJsaXN0Ym94XCI+PGRpdiBjbGFzcz1cIml0ZW0gYWN0aXZlXCI+JyArXG4gICc8aW1nICBzcmM9XCJpbWcvZ29vZ2xlLW1hcC1hcGkucG5nXCIgY2xhc3M9XCJpbWctcmVzcG9uc2l2ZSBcIiAnICtcbiAgJ2FsdD1cIlJlc3BvbnNpdmUgaW1hZ2VcIiAvPicgK1xuICAnPGRpdiBjbGFzcz1cImNhcm91c2VsLWNhcHRpb24gc2V0LWNhcHRpb25cIj48ZGl2ICcgK1xuICAnY2xhc3M9XCJmdWxsLXdpZHRoIHRleHQtY2VudGVyXCI+PGgzIGNsYXNzPVwiZXJyb3JcIj4nICtcbiAgYWxlcnRtc2cudG9VcHBlckNhc2UoKSArICc8L2gzPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2Pic7XG5cbiAgJCgnI3ZpZXcnKS5odG1sKGVycm9yUGdDb250ZW50KTtcbiAgcmV0dXJuICh0cnVlKTtcbn1cblxuYXBwLm1vZGVsID0ge1xuXG4gIGxvY2F0aW9uczogW1xuXG4gICAgXCIzMjAgUGlvbmVlciBXYXksIE1vdW50YWluIFZpZXcsIENBIDk0MDQxLCBVbml0ZWQgU3RhdGVzXCIsXG4gICAgXCI4MCBXIEVsIENhbWlubyBSZWFsLCBNb3VudGFpbiBWaWV3LCBDQSA5NDA0MCwgVW5pdGVkIFN0YXRlc1wiLFxuICAgIFwiR3JhbnQgUGFyayBQbGF6YSwgMTA0MCBHcmFudCBSb2FkICMzNTAsIFwiICtcbiAgICBcIk1vdW50YWluIFZpZXcsIENBIDk0MDQwLCBVbml0ZWQgU3RhdGVzXCIsXG4gICAgXCI2MzUgVyBEYW5hIFN0LCBNb3VudGFpbiBWaWV3LCBDQSA5NDA0MSwgVW5pdGVkIFN0YXRlc1wiLFxuICAgIFwiNTMgVyBFbCBDYW1pbm8gUmVhbCwgTW91bnRhaW4gVmlldywgQ0EgOTQwNDAsIFVuaXRlZCBTdGF0ZXNcIixcbiAgICBcIkdyYW50IFBhcmsgUGxhemEsIDEwNDAgR3JhbnQgUmQsIE1vdW50YWluIFZpZXcsIENBIDk0MDQwLCBVbml0ZWQgU3RhdGVzXCIsXG4gICAgXCIxNDUgRSBEYW5hIFN0LCBNb3VudGFpbiBWaWV3LCBDQSA5NDA0MSwgVW5pdGVkIFN0YXRlc1wiLFxuICAgIFwiNzAxIEUgRWwgQ2FtaW5vIFJlYWwsIE1vdW50YWluIFZpZXcsIENBIDk0MDQwLCBVbml0ZWQgU3RhdGVzXCIsXG4gICAgXCJHcmFudCBQYXJrIFBsYXphLCAxMzUwIEdyYW50IFJkIFN1aXRlIDgsIFwiICtcbiAgICBcIk1vdW50YWluIFZpZXcsIENBIDk0MDQwLCBVbml0ZWQgU3RhdGVzXCIsXG4gICAgXCI3NTAgQ2FzdHJvIFN0LCBNb3VudGFpbiBWaWV3LCBDQSA5NDA0MSwgVW5pdGVkIFN0YXRlc1wiXSxcblxuICBnb29nbGVNYXA6ICc8ZGl2IGlkPVwibWFwXCI+PC9kaXY+JyxcbiAgY3VycmVudE1hcmtlcjogbnVsbCxcbiAgbWFwT3B0aW9uczoge2Rpc2FibGVEZWZhdWx0VUk6IHRydWV9LFxuICBzZXJ2aWNlOiBudWxsLFxuICAgIC8vIGluZm9XaW5kb3c6IG51bGwsXG4gICAgLyoqXG4gICAgKiBAZGVzY3JpcHRpb24gZ2V0IGFuIGluc3RhbmNlIG9mIHRoZSBpbmZvcm1hdGlvbiB3aW5kb3cgZm9yIGVhY2ggbWFya2VyXG4gICAgKiBAY29uc3RydWN0b3JcbiAgICAqL1xuICBnZXRJbmZvV2luZG93OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coKTtcbiAgfSxcbiAgYXV0aDoge1xuICAgICAgLy9cbiAgICAgIC8vIFVwZGF0ZSB3aXRoIHlvdXIgYXV0aCB0b2tlbnMuXG4gICAgICAvL1xuICAgIGNvbnN1bWVyS2V5OiBcIkNjemtCTlJqX2Vhb01ncWQwbzRuMUFcIixcbiAgICBjb25zdW1lclNlY3JldDogXCJqZk1IZnBIdWJHVVpXUkJYVkFqVGFUTVJyYm9cIixcbiAgICBhY2Nlc3NUb2tlbjogXCIwSUtHQ1ZWem9SSXBCMldLUXRGUFlhX3N0UkFsem1ZT1wiLFxuICAgICAgLy8gVGhpcyBleGFtcGxlIGlzIGEgcHJvb2Ygb2YgY29uY2VwdCwgZm9yIGhvdyB0byB1c2UgdGhlIFllbHAgdjIgQVBJIHdpdGggamF2YXNjcmlwdC5cbiAgICAgIC8vIFlvdSB3b3VsZG4ndCBhY3R1YWxseSB3YW50IHRvIGV4cG9zZSB5b3VyIGFjY2VzcyB0b2tlbiBzZWNyZXQgbGlrZSB0aGlzIGluIGEgcmVhbCBhcHBsaWNhdGlvbi5cbiAgICBhY2Nlc3NUb2tlblNlY3JldDogXCJKRW9ZSWJqcTJOSmt5d1BvN0hCdV9wRzRHZ0VcIixcbiAgICBzZXJ2aWNlUHJvdmlkZXI6IHtzaWduYXR1cmVNZXRob2Q6IFwiSE1BQy1TSEExXCJ9XG4gIH0sXG4gICAgLypcbiAgICAqIEBkZXNjcmlwdGlvbiBUaGlzIGlzIHVzZWQgdG8gc2VhcmNoIGZvciBhIHNwZWNpZmMgcGxhY2UgYnkgaWQsIGNhbGxlZCB3aGVuIHRoZSBwbGFjZSBtYXJrZXIgaXMgY2xpY2tlZC5cbiAgICAqIEBjb25zdHJ1Y3RvclxuICAgICogQHBhcmFtIHtvYmplY3R9IE1hcmtlciBzZWxlY3RlZCBieSBjbGlja1xuICAgICovXG4gIHBsYWNlRGV0YWlsc0J5UGxhY2VJZDogZnVuY3Rpb24obWFya2VyKSB7XG4gICAgICAvLyBDcmVhdGUgYW5kIHNlbmQgdGhlIHJlcXVlc3QgdG8gb2J0YWluIGRldGFpbHMgZm9yIGEgc3BlY2lmaWMgcGxhY2UsXG4gICAgICAvLyB1c2luZyBpdHMgUGxhY2UgSUQuXG4gICAgdmFyIHBsYWNlSWQgPSBtYXJrZXIucGxhY2VJZDtcblxuICAgIHZhciByZXF1ZXN0ID0ge3BsYWNlSWQ6IHBsYWNlSWR9O1xuXG4gICAgYXBwLlZpZXdNb2RlbC5zZXJ2aWNlLmdldERldGFpbHMocmVxdWVzdCwgYXBwLm1vZGVsLnBsYWNlQ2FsbEJhY2spO1xuICB9LFxuICAgIC8qKlxuICAgICogQGRlc2NyaXB0aW9uIENhbGxiYWNrIGZvciB0aGUgc2VydmljZSBkZXRhaWxzIHNlYXJjaCBieSBpZFxuICAgICogQGNvbnN0cnVjdG9yXG4gICAgKiBAcGFyYW0ge29iamVjdH0gcGxhY2UgLSBwbGFjZSByZXR1cm5lZCBieSBmb3VuZCBieSBwbGFjZSBkZXRhaWxzIHNlYXJjaCBieSBpZFxuICAgICogQHBhcmFtIHtzdHJpbmd9IHN0YXR1cyAtIHN0YXR1cyBjb2RlIHJldHVybmVkIGJ5IHBsYWNlIGRldGFpbHMgc2VhcmNoIGJ5IGlkXG4gICAgKi9cbiAgcGxhY2VDYWxsQmFjazogZnVuY3Rpb24ocGxhY2UsIHN0YXR1cykge1xuICAgIGlmIChzdGF0dXMgPT09IGdvb2dsZS5tYXBzLnBsYWNlcy5QbGFjZXNTZXJ2aWNlU3RhdHVzLk9LKSB7XG4gICAgICBjb25zb2xlLmxvZygncGxhY2U6ICcpO1xuICAgICAgY29uc29sZS5sb2cocGxhY2UpO1xuICAgICAgYXBwLm1vZGVsLmdldFllbHBEYXRhKHBsYWNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gd2luZG93LmFsZXJ0KCdFcnJvciwgVHJ5IEFnYWluJyk7XG4gICAgfVxuICB9LFxuXG4gICAgLypcbiAgICAqIEBkZXNjcmlwdGlvbiBGdW5jdGlvbiB0byBzZWFyY2ggZm9yIFllbHAgZGF0YSBmb3IgYSBzcGVjaWZpYyBwbGFjZVxuICAgICogQGNvbnN0cnVjdG9yXG4gICAgKiBAcGFyYW0ge29iamVjdH0gcGxhY2UgLSBwbGFjZSBmb3Igd2hpY2ggWWVscCBkYXRhIGlzIHRvIHNlYXJjaGVkIGZvclxuICAgICovXG4gIGdldFllbHBEYXRhOiBmdW5jdGlvbihwbGFjZSkge1xuICAgIGNvbnNvbGUubG9nKCdhYm91dCB0byByZXF1ZXN0IHllbHAgZGF0YScpO1xuICAgIHZhciB0ZXJtcyA9ICdidXNpbmVzcyc7XG4gICAgdmFyIG5lYXIgPSBwbGFjZS5mb3JtYXR0ZWRfYWRkcmVzcztcbiAgICB2YXIgbGltaXQgPSAzO1xuXG4gICAgdmFyIGFjY2Vzc29yID0ge1xuICAgICAgY29uc3VtZXJTZWNyZXQ6IGFwcC5tb2RlbC5hdXRoLmNvbnN1bWVyU2VjcmV0LFxuICAgICAgdG9rZW5TZWNyZXQ6IGFwcC5tb2RlbC5hdXRoLmFjY2Vzc1Rva2VuU2VjcmV0XG4gICAgfTtcblxuICAgIHZhciBwYXJhbWV0ZXJzID0gW107XG4gICAgcGFyYW1ldGVycy5wdXNoKFsndGVybScsIHRlcm1zXSk7XG4gICAgcGFyYW1ldGVycy5wdXNoKFsnbGltaXQnLCBsaW1pdF0pO1xuICAgIHBhcmFtZXRlcnMucHVzaChbJ2xvY2F0aW9uJywgbmVhcl0pO1xuICAgIHBhcmFtZXRlcnMucHVzaChbJ2NhbGxiYWNrJywgJ2NiJ10pO1xuICAgIHBhcmFtZXRlcnMucHVzaChbJ29hdXRoX2NvbnN1bWVyX2tleScsIGFwcC5tb2RlbC5hdXRoLmNvbnN1bWVyS2V5XSk7XG4gICAgcGFyYW1ldGVycy5wdXNoKFsnb2F1dGhfY29uc3VtZXJfc2VjcmV0JywgYXBwLm1vZGVsLmF1dGguY29uc3VtZXJTZWNyZXRdKTtcbiAgICBwYXJhbWV0ZXJzLnB1c2goWydvYXV0aF90b2tlbicsIGFwcC5tb2RlbC5hdXRoLmFjY2Vzc1Rva2VuXSk7XG4gICAgcGFyYW1ldGVycy5wdXNoKFsnb2F1dGhfc2lnbmF0dXJlX21ldGhvZCcsICdITUFDLVNIQTEnXSk7XG5cbiAgICB2YXIgbWVzc2FnZSA9IHtcbiAgICAgIGFjdGlvbjogJ2h0dHA6Ly9hcGkueWVscC5jb20vdjIvc2VhcmNoJyxcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBwYXJhbWV0ZXJzOiBwYXJhbWV0ZXJzXG4gICAgfTtcblxuICAgIE9BdXRoLnNldFRpbWVzdGFtcEFuZE5vbmNlKG1lc3NhZ2UpO1xuICAgIE9BdXRoLlNpZ25hdHVyZU1ldGhvZC5zaWduKG1lc3NhZ2UsIGFjY2Vzc29yKTtcblxuICAgIHZhciBwYXJhbWV0ZXJNYXAgPSBPQXV0aC5nZXRQYXJhbWV0ZXJNYXAobWVzc2FnZS5wYXJhbWV0ZXJzKTtcbiAgICBwYXJhbWV0ZXJNYXAub2F1dGhfc2lnbmF0dXJlID1cbiAgICBPQXV0aC5wZXJjZW50RW5jb2RlKHBhcmFtZXRlck1hcC5vYXV0aF9zaWduYXR1cmUpO1xuXG4gICAgLy8gdGltZSBvdXQgeWVscCBhcGkgcmVxdWVzdFxuICAgIHZhciBhcGlUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGFwcC5tb2RlbC5oYW5kbGVFcnJvcihcIlllbHAgZGF0YSByZXRyaWV2YWwgZXJyb3IhXCIpO1xuICAgIH0sIDUwMDApO1xuXG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogbWVzc2FnZS5hY3Rpb24sXG4gICAgICBkYXRhOiBwYXJhbWV0ZXJNYXAsXG4gICAgICBjYWNoZTogdHJ1ZSxcbiAgICAgIGRhdGFUeXBlOiAnanNvbnAnLFxuICAgICAganNvbnBDYWxsYmFjazogJ2NiJ1xuICAgIH0pLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICBjbGVhclRpbWVvdXQoYXBpVGltZW91dCk7XG5cbiAgICAgIHZhciBzb3VyY2UgPSAkKFwiI21hcmtlci10Ymwtcm93XCIpLmh0bWwoKTtcbiAgICAgIHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShzb3VyY2UpO1xuICAgICAgdmFyIGJ1c2luZXNzZXMgPSBkYXRhLmJ1c2luZXNzZXM7XG4gICAgICBidXNpbmVzc2VzLm5hbWUgPSBwbGFjZS5uYW1lO1xuICAgICAgYnVzaW5lc3Nlcy5pY29uID0gcGxhY2UuaWNvbjtcbiAgICAgIHZhciBodG1sID0gdGVtcGxhdGUoYnVzaW5lc3Nlcyk7XG5cbiAgICAgIHZhciB0TWFwID0gYXBwLlZpZXdNb2RlbC5tYXA7XG4gICAgICB2YXIgdEN1cnJlbnRNYXJrZXIgPSBhcHAubW9kZWwuY3VycmVudE1hcmtlcjtcblxuICAgICAgYXBwLm1vZGVsLmN1cnJlbnRNYXJrZXIuaW5mb1dpbmRvdy5zZXRDb250ZW50KGh0bWwpO1xuICAgICAgY29uc29sZS5sb2coYXBwLm1vZGVsLmN1cnJlbnRNYXJrZXIuaW5mb1dpbmRvdyk7XG4gICAgICBhcHAubW9kZWwuY3VycmVudE1hcmtlci5pbmZvV2luZG93Lm9wZW4odE1hcCwgdEN1cnJlbnRNYXJrZXIpO1xuICAgIH0pLmZhaWwoZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMpIHtcbiAgICAgIGFwcC5tb2RlbC5oYW5kbGVFcnJvcih0ZXh0U3RhdHVzKTtcbiAgICB9KTtcbiAgfSxcbiAgLyoqXG4gICogQGRlc2NyaXB0aW9uIEhhbmRsZXMgZXJyb3JzIHRoYXQgbWF5IHJlc3VsdCBmcm9tIHRoZSBZZWxwIEFwaSByZXF1ZXN0XG4gICogQGNvbnN0cnVjdG9yXG4gICogQHBhcmFtIHtvYmplY3R9IGVycm9yIC0gZGV0YWlscyBvZiB0aGUgZXJyb3IgdGhhdCBvY2N1cmVkXG4gICovXG4gIGhhbmRsZUVycm9yOiBmdW5jdGlvbihlcnJvcikge1xuICAgIHZhciBzb3VyY2UgPSAkKFwiI3llbHBFcnJvclNjcmlwdFwiKS5odG1sKCk7XG4gICAgdmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKHNvdXJjZSk7XG4gICAgdmFyIGRhdGEgPSB7aW1nVXJsOiAnaW1nL3dhcm5pbmcucG5nJywgZXJyb3I6ICdFcnJvcjogJyArXG4gICAgZXJyb3IgKyAnIFBsZWFzZSBUcnkgYWdhaW4uJ307XG4gICAgdmFyIGh0bWwgPSB0ZW1wbGF0ZShkYXRhKTtcbiAgICBhcHAubW9kZWwuY3VycmVudE1hcmtlci5pbmZvV2luZG93LnNldENvbnRlbnQoaHRtbCk7XG4gICAgYXBwLm1vZGVsLmN1cnJlbnRNYXJrZXIuaW5mb1dpbmRvd1xuICAgIC5vcGVuKGFwcC5WaWV3TW9kZWwubWFwLCBhcHAubW9kZWwuY3VycmVudE1hcmtlcik7XG4gIH1cblxufTtcblxuLyoqXG4qIEBkZXNjcmlwdGlvbiBWaWV3TW9kZWxcbiogQGNvbnN0cnVjdG9yXG4qL1xuYXBwLlZpZXdNb2RlbCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy8gdGltZXIgc3RhdHVzIHZhcmlhYmxlXG4gIHNlbGYudGltZWRPdXQgPSBmYWxzZTtcblxuICAgIC8vIGtvIG9ic2VydmFibGUgYXJyYXkgdGhhdCBzdG9yZXMgdGhlIG1hcmtlcnMgdXNlZCB0byBjcmVhdGUgdGhlIGxpc3QgdmlldyBhbmQgcG9wdWxhdGUgdGhlIG1hcFxuICBzZWxmLm1hcmtlcnMgPSBrby5vYnNlcnZhYmxlQXJyYXkoW10pO1xuICAkKFwiI21hcERpdlwiKS5hcHBlbmQoYXBwLm1vZGVsLmdvb2dsZU1hcCk7XG4gICAgLy8gdHJ5IGNhdGNoIHN0YXRlbWVudCB1c2VkIHRvIGluaXRpYXRlIGZhbGwgYmFjayBpZiByZXF1aXJlZFxuICB0cnkge1xuICAgIC8qXG4gICAgICBGb3IgdGhlIG1hcCB0byBiZSBkaXNwbGF5ZWQsIHRoZSBnb29nbGVNYXAgdmFyIG11c3QgYmVcbiAgICAgIGFwcGVuZGVkIHRvICNtYXBEaXYuXG4gICAgKi9cbiAgICBhcHAuVmlld01vZGVsLm1hcCA9XG4gICAgbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyksIGFwcC5tb2RlbC5tYXBPcHRpb25zKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKCdlcnJvcjogJyArIGUubWVzc2FnZSk7XG4gICAgLy8gdGhpcyBpbml0aWF0ZXMgZmFsbGJhY2sgYW5kIHN0b3BzIHRoZSBpbml0aWFsIHJlcXVlc3QgZm9yIHN0YXJ0aW5nXG4gICAgc2VsZi5zdG9wID0gZ29vZ2xlRXJyb3IoKTtcbiAgfSBmaW5hbGx5IHtcblxuICB9XG5cbiAgLy8gY3JlYXRlcyBhIEdvb2dsZSBwbGFjZSBzZWFyY2ggc2VydmljZSBvYmplY3QuIFBsYWNlc1NlcnZpY2UgZG9lcyB0aGUgd29yayBvZlxuICAvLyBhY3R1YWxseSBzZWFyY2hpbmcgZm9yIGxvY2F0aW9uIGRhdGEuXG4gIGFwcC5WaWV3TW9kZWwuc2VydmljZSA9XG4gIG5ldyBnb29nbGUubWFwcy5wbGFjZXMuUGxhY2VzU2VydmljZShhcHAuVmlld01vZGVsLm1hcCk7XG5cbiAgLypcbiAgQGRlc2NyaXB0aW9uIGNyZWF0ZU1hcE1hcmtlcihwbGFjZURhdGEpIHJlYWRzIEdvb2dsZSBQbGFjZXMgc2VhcmNoIHJlc3VsdHMgdG8gY3JlYXRlIG1hcCBwaW5zLlxuICBwbGFjZURhdGEgaXMgdGhlIG9iamVjdCByZXR1cm5lZCBmcm9tIHNlYXJjaCByZXN1bHRzIGNvbnRhaW5pbmcgaW5mb3JtYXRpb25cbiAgYWJvdXQgYSBzaW5nbGUgbG9jYXRpb24uXG4gIEBwYXJhbSB7b2JqZWN0fSBwbGFjZURhdGEgLSBHb29nbGUgUGxhY2VzIHNlYXJjaCByZXN1bHQgZGF0YVxuICAqL1xuICBhcHAuVmlld01vZGVsLmNyZWF0ZU1hcE1hcmtlciA9IGZ1bmN0aW9uKHBsYWNlRGF0YSkge1xuICAgIC8vIFRoZSBuZXh0IGxpbmVzIHNhdmUgbG9jYXRpb24gZGF0YSBmcm9tIHRoZSBzZWFyY2ggcmVzdWx0IG9iamVjdCB0byBsb2NhbCB2YXJpYWJsZXNcbiAgICB2YXIgbGF0ID0gcGxhY2VEYXRhLmdlb21ldHJ5LmxvY2F0aW9uLmxhdCgpOyAgLy8gbGF0aXR1ZGUgZnJvbSB0aGUgcGxhY2Ugc2VydmljZVxuICAgIHZhciBsb24gPSBwbGFjZURhdGEuZ2VvbWV0cnkubG9jYXRpb24ubG5nKCk7ICAvLyBsb25naXR1ZGUgZnJvbSB0aGUgcGxhY2Ugc2VydmljZVxuICAgIHZhciBuYW1lID0gcGxhY2VEYXRhLm5hbWU7ICAgLy8gbmFtZSBvZiB0aGUgcGxhY2UgZnJvbSB0aGUgcGxhY2Ugc2VydmljZVxuICAgIHZhciBib3VuZHMgPSB3aW5kb3cubWFwQm91bmRzOyAgICAgICAgICAgIC8vIGN1cnJlbnQgYm91bmRhcmllcyBvZiB0aGUgbWFwIHdpbmRvd1xuXG4gICAgLy8gbWFya2VyIGlzIGFuIG9iamVjdCB3aXRoIGFkZGl0aW9uYWwgZGF0YSBhYm91dCB0aGUgcGluIGZvciBhIHNpbmdsZSBsb2NhdGlvblxuICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcbiAgICAgIG1hcDogYXBwLlZpZXdNb2RlbC5tYXAsXG4gICAgICBwb3NpdGlvbjogcGxhY2VEYXRhLmdlb21ldHJ5LmxvY2F0aW9uLFxuICAgICAgdGl0bGU6IG5hbWUsXG4gICAgICBwbGFjZUlkOiBwbGFjZURhdGEucGxhY2VfaWQsXG4gICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICBhbmltYXRpb246IGdvb2dsZS5tYXBzLkFuaW1hdGlvbi5EUk9QXG4gICAgICAvLyBpY29uOiBwbGFjZURhdGEuaWNvblxuICAgIH0pO1xuXG4gIC8vIHNldCBhbiBpbmZvV2luZG93IGZvciBlYWNoIG1hcmtlclxuICAgIG1hcmtlci5pbmZvV2luZG93ID0gYXBwLm1vZGVsLmdldEluZm9XaW5kb3coKTtcbiAgICAvLyBhZGQgbWFya2VycyB0byBtYXJrZXIgYXJyYXlcbiAgICBzZWxmLm1hcmtlcnMucHVzaChtYXJrZXIpO1xuXG4gICAgLy8gQ2hlY2sgdG8gc2VlIGlmIGFsbCBpbml0aWFsIGRhdGEgd2FzIHJlY2VpdmVkXG4gICAgaWYgKGFwcC5tb2RlbC5sb2NhdGlvbnMubGVuZ3RoID09PSBzZWxmLm1hcmtlcnMoKS5sZW5ndGgpIHtcbiAgICAgIHNlbGYudGltZWRPdXQgPSBmYWxzZTtcbiAgICAgIGNsZWFyVGltZW91dChzZWxmLnJlcXVlc3RUaW1lcik7XG4gICAgICBjb25zb2xlLmxvZygndGltZXIgcmVzZXQnKTtcbiAgICB9XG5cbiAgICAgIC8vIGFkZCBsaXN0ZW5lciB0byByZXNwb25kIHRvIGNsaWNrIGV2ZW50cyBvbiBtYXJrZXJzXG4gICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFya2VyLCAnY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChhcHAubW9kZWwuY3VycmVudE1hcmtlciAhPT0gbnVsbCAmJlxuICAgICAgICBhcHAubW9kZWwuY3VycmVudE1hcmtlci5pbmZvV2luZG93ICE9PSBudWxsKSB7XG4gICAgICAgIGFwcC5tb2RlbC5jdXJyZW50TWFya2VyLmluZm9XaW5kb3cuY2xvc2UoKTtcbiAgICAgIH1cblxuICAgICAgYXBwLm1vZGVsLmN1cnJlbnRNYXJrZXIgPSBudWxsO1xuICAgICAgYXBwLm1vZGVsLmN1cnJlbnRNYXJrZXIgPSBtYXJrZXI7XG4gICAgICBhcHAubW9kZWwucGxhY2VEZXRhaWxzQnlQbGFjZUlkKGFwcC5tb2RlbC5jdXJyZW50TWFya2VyKTtcbiAgICB9KTtcbiAgLy8gYWRkIGxpc3RlbmVyIHRvIHRyaWdnZXIgYm91bmNlIGFuaW1hdGlvbiBmb3IgbWFya2VyIGljb24gYWZ0ZXIgdGhleSBoYXZlIGJlZW4gY2xpY2tlZFxuICAgIG1hcmtlci5hZGRMaXN0ZW5lcignY2xpY2snLCBhcHAuVmlld01vZGVsLnRvZ2dsZUJvdW5jZSk7XG5cbiAgICAvLyB0aGlzIGlzIHdoZXJlIHRoZSBwaW4gYWN0dWFsbHkgZ2V0cyBhZGRlZCB0byB0aGUgbWFwLlxuICAgIC8vIGJvdW5kcy5leHRlbmQoKSB0YWtlcyBpbiBhIG1hcCBsb2NhdGlvbiBvYmplY3RcbiAgICBib3VuZHMuZXh0ZW5kKG5ldyBnb29nbGUubWFwcy5MYXRMbmcobGF0LCBsb24pKTtcbiAgICAvLyBmaXQgdGhlIG1hcCB0byB0aGUgbmV3IG1hcmtlclxuICAgIGFwcC5WaWV3TW9kZWwubWFwLmZpdEJvdW5kcyhib3VuZHMpO1xuICAgIC8vIGNlbnRlciB0aGUgbWFwXG4gICAgYXBwLlZpZXdNb2RlbC5tYXAuc2V0Q2VudGVyKGJvdW5kcy5nZXRDZW50ZXIoKSk7XG4gIH07XG5cbiAgICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIEFuaW1hdGVzIHNlbGVjdGVkIG1hcmtlciB3aXRoIGEgYm91bmNlIGFuaW1hdGlvblxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICBhcHAuVmlld01vZGVsLnRvZ2dsZUJvdW5jZSA9IGZ1bmN0aW9uKCkge1xuICAgIHNlbGYubWFya2VycygpLmZvckVhY2goZnVuY3Rpb24obWFyaykge1xuICAgICAgbWFyay5zZXRBbmltYXRpb24obnVsbCk7XG4gICAgfSk7XG5cbiAgICBhcHAubW9kZWwuY3VycmVudE1hcmtlci5zZXRBbmltYXRpb24oZ29vZ2xlLm1hcHMuQW5pbWF0aW9uLkJPVU5DRSk7XG4gIH07XG5cbiAgLypcbiAgKiBAZGVzY3JpcHRpb24gY2FsbGJhY2socmVzdWx0cywgc3RhdHVzKSBtYWtlcyBzdXJlIHRoZSBzZWFyY2ggcmV0dXJuZWQgcmVzdWx0cyBmb3IgYSBsb2NhdGlvbi5cbiAgSWYgc28sIGl0IGNyZWF0ZXMgYSBuZXcgbWFwIG1hcmtlciBmb3IgdGhhdCBsb2NhdGlvbi5cbiAgKiBAcGFyYW0ge29iamVjdH0gcmVzdWx0cyAtIHNlYXJjaCByZXR1cm5lZCByZXN1bHRzIGZvciBhIGxvY2F0aW9uXG4gICogQHBhcmFtIHtzdHJpbmd9IHN0YXR1cyAtIHBsYWNlcyBhcGkgcmVxdWVzdCBzdGF0dXNcbiAgKi9cbiAgc2VsZi5jYWxsYmFjayA9IGZ1bmN0aW9uKHJlc3VsdHMsIHN0YXR1cykge1xuICAgIGNvbnNvbGUubG9nKCdpbiBjYWxsYmFjaycpO1xuXG4gICAgaWYgKHN0YXR1cyA9PT0gZ29vZ2xlLm1hcHMucGxhY2VzLlBsYWNlc1NlcnZpY2VTdGF0dXMuT0spIHtcbiAgICAgIGFwcC5WaWV3TW9kZWwuY3JlYXRlTWFwTWFya2VyKHJlc3VsdHNbMF0pO1xuXG4gICAgICB2YXIgcGxhY2UgPSByZXN1bHRzWzBdO1xuICAgICAgY29uc29sZS5sb2cocGxhY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB3aW5kb3cuYWxlcnQoJ0Vycm9yLCBUcnkgQWdhaW4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG5cbiAgLypcbiAgKiBAZGVzY3JpcHRpb24gcGluUG9zdGVyKGxvY2F0aW9ucykgdGFrZXMgaW4gdGhlIGFycmF5IG9mIGxvY2F0aW9ucyBjcmVhdGVkIGJ5IGxvY2F0aW9uRmluZGVyKClcbiAgYW5kIGZpcmVzIG9mZiBHb29nbGUgcGxhY2Ugc2VhcmNoZXMgZm9yIGVhY2ggbG9jYXRpb25cbiAgKi9cbiAgdGhpcy5waW5Qb3N0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBJdGVyYXRlcyB0aHJvdWdoIHRoZSBhcnJheSBvZiBsb2NhdGlvbnMsIGNyZWF0ZXMgYSBzZWFyY2ggb2JqZWN0IGZvciBlYWNoIGxvY2F0aW9uXG4gICAgYXBwLm1vZGVsLmxvY2F0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKHBsYWNlKSB7XG4gICAgICAvLyB0aGUgc2VhcmNoIHJlcXVlc3Qgb2JqZWN0XG4gICAgICB2YXIgcmVxdWVzdCA9IHtxdWVyeTogcGxhY2V9O1xuXG4gICAgICAvLyBBY3R1YWxseSBzZWFyY2hlcyB0aGUgR29vZ2xlIE1hcHMgQVBJIGZvciBsb2NhdGlvbiBkYXRhIGFuZCBydW5zIHRoZSBjYWxsYmFja1xuICAgICAgLy8gZnVuY3Rpb24gd2l0aCB0aGUgc2VhcmNoIHJlc3VsdHMgYWZ0ZXIgZWFjaCBzZWFyY2guXG4gICAgICBhcHAuVmlld01vZGVsLnNlcnZpY2UudGV4dFNlYXJjaChyZXF1ZXN0LCBzZWxmLmNhbGxiYWNrKTtcbiAgICB9KTtcbiAgfTtcblxuICAgIC8vIFNldHMgdGhlIGJvdW5kYXJpZXMgb2YgdGhlIG1hcCBiYXNlZCBvbiBwaW4gbG9jYXRpb25zXG4gIHdpbmRvdy5tYXBCb3VuZHMgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzKCk7XG5cbiAgLy8gdGltZXIgZm9yIGZhbGxiYWNrIGluIGNhc2UgcmVxdWVzdHMgYXJlIHRha2luZyB0b28gbG9uZ1xuICBzZWxmLnJlcXVlc3RUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgc2VsZi50aW1lZE91dCA9IHRydWU7XG4gICAgY29uc29sZS5sb2coJ1JlcXVlc3QgdGltZWQgb3V0LicpO1xuICAgIGdvb2dsZUVycm9yKCk7XG4gIH0sIDEwMDAwKTtcblxuICAvLyBwaW5Qb3N0ZXIobG9jYXRpb25zKSBjcmVhdGVzIHBpbnMgb24gdGhlIG1hcCBmb3IgZWFjaCBsb2NhdGlvbiBpblxuICAvLyB0aGUgbG9jYXRpb25zIGFycmF5XG4gIC8vIHRoZSBpZiBzdGF0ZW1lbnQgY2hlY2tzIHRvIHNlZSBpZiBpdHMgb2sgdG8gcHJvY2VlZCB3aXRoIHRoZSByZXF1ZXN0IGZvciB0aGUgaW5pdGlhbCBkYXRhIGZvciB0aGUgbWFwIGxvY2F0aW9uc1xuICAvLyBpZiAoIXNlbGYuc3RvcCkge1xuICBzZWxmLnBpblBvc3RlcigpO1xuICAvLyB9XG5cbiAgLyogQGRlc2NyaXB0aW9uIGFkZCBiYWNrIG1hcmtldCB0byBtYXBcbiAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggLSBwb3NpdGlvbiBvZiBtYXJrZXIgaW4gbWFya2VycyBhcnJheVxuICAqIEBwYXJhbSB7b2JqZWN0fSBtYXAgLSBtYXAgb2JqZWN0XG4gICovXG4gIHNlbGYuYWRkTWFya2VyID0gZnVuY3Rpb24oaW5kZXgsIG1hcCkge1xuICAgIHNlbGYubWFya2VycygpW2luZGV4XS5zZXRNYXAobWFwKTtcbiAgfTtcblxuICAgIC8qIEBkZXNjcmlwdGlvbiBTZXRzIHRoZSBtYXAgb24gYWxsIG1hcmtlcnMgaW4gdGhlIGFycmF5LlxuICAgICogQHBhcmFtIHtvYmplY3R9IG1hcCAtIG1hcCBvYmplY3RcbiAgICAqL1xuICBzZWxmLnNldE1hcE9uQWxsID0gZnVuY3Rpb24obWFwKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLm1hcmtlcnMoKS5sZW5ndGg7IGkrKykge1xuICAgICAgc2VsZi5tYXJrZXJzKClbaV0uc2V0TWFwKG1hcCk7XG4gICAgfVxuICB9O1xuXG4gICAgLyogQGRlc2NyaXB0aW9uIEZpbHRlcnMgbWFya2VycyBhcnJheSAuXG4gICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsdGVyIC0gc3RyaW5nIHVzZWQgdG8gZmlsdGVyIG1hcmtlcnMgYXJyYXlcbiAgICAqL1xuICBzZWxmLmZpbHRlck1hcmtlcnMgPSBmdW5jdGlvbihmaWx0ZXIpIHtcbiAgICBzZWxmLnNldE1hcE9uQWxsKG51bGwpO1xuXG4gICAgc2VsZi5tYXJrZXJzKCkuZm9yRWFjaChmdW5jdGlvbihtYXJrZXIsIGluZGV4KSB7XG4gICAgICB2YXIgbWFya2VyU3RyID0gbWFya2VyLnRpdGxlO1xuICAgICAgaWYgKCFmaWx0ZXIpIHtcbiAgICAgICAgc2VsZi5zZXRNYXBPbkFsbChhcHAuVmlld01vZGVsLm1hcCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChtYXJrZXJTdHIudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbHRlcikgIT09IC0xKSB7XG4gICAgICAgIHNlbGYuYWRkTWFya2VyKGluZGV4LCBhcHAuVmlld01vZGVsLm1hcCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgLy8ga28gb2JzZXJ2YWJsZSB0aGF0IGNvbGxlY3RzIHRoZSBmaWx0ZXIgZnJvbSB0aGUgaHRtbCBpbnB1dCBlbGVtZW50XG4gIHNlbGYuZmlsdGVyID0ga28ub2JzZXJ2YWJsZShcIlwiKTtcbiAgc2VsZi5pbml0aWFsaXplID0gdHJ1ZTtcblxuICAvLyBrbyBjb21wdXRlZCBvYnNlcnZhYmxlIHRoYXQgd2lsbCBmaWx0ZXIgdGhlIG1hcmtlcnMgb2JzZXJ2YWJsZSBhcnJheSBiYXNlZCBvbiB0aGUgZmlsdGVyIGlucHV0XG4gIHNlbGYuZmlsdGVyZWRJdGVtcyA9IGtvLmNvbXB1dGVkKGZ1bmN0aW9uKCkge1xuICAgIHZhciBmaWx0ZXIgPSBzZWxmLmZpbHRlcigpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAoZmlsdGVyKSB7XG4gICAgICBzZWxmLmZpbHRlck1hcmtlcnMoZmlsdGVyKTtcbiAgICAgIHJldHVybiBrby51dGlscy5hcnJheUZpbHRlcihzZWxmLm1hcmtlcnMoKSwgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbS50aXRsZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZmlsdGVyKSAhPT0gLTE7XG4gICAgICB9KTtcbiAgICAvLyB9IGVsc2Uge1xuICAgIC8vICAgc2VsZi5maWx0ZXJNYXJrZXJzKGZpbHRlcik7XG4gICAgLy8gICByZXR1cm4gc2VsZi5tYXJrZXJzKCk7XG4gICAgfVxuICAgIHNlbGYuZmlsdGVyTWFya2VycyhmaWx0ZXIpO1xuICAgIHJldHVybiBzZWxmLm1hcmtlcnMoKTtcbiAgfSk7XG5cbiAgIC8qIEBkZXNjcmlwdGlvbiBSZXF1ZXN0IHBsYWNlIGRldGFpbHMgZm9yIHRoZSBjdXJyZW50IG1hcmtlciBzZWxlY3RlZCB2aWEgbGlzdC5cbiAgICogQHBhcmFtIHtvYmplY3R9IG1hcmtlciAtIG1hcmtlciBzZWxlY3RlZCBmcm9tIGxpc3Qgdmlld1xuICAgKi9cbiAgdGhpcy5zaG93SW5mb3dpbmRvdyA9IGZ1bmN0aW9uKG1hcmtlcikge1xuICAgIGlmIChhcHAubW9kZWwuY3VycmVudE1hcmtlciAhPT0gbnVsbCAmJlxuICAgICAgYXBwLm1vZGVsLmN1cnJlbnRNYXJrZXIuaW5mb1dpbmRvdyAhPT0gbnVsbCkge1xuICAgICAgYXBwLm1vZGVsLmN1cnJlbnRNYXJrZXIuaW5mb1dpbmRvdy5jbG9zZSgpO1xuICAgIH1cbiAgICBzZWxmLmZpbHRlcignJyk7XG5cbiAgICBhcHAubW9kZWwuY3VycmVudE1hcmtlciA9IG51bGw7XG4gICAgYXBwLm1vZGVsLmN1cnJlbnRNYXJrZXIgPSBtYXJrZXI7XG4gICAgYXBwLlZpZXdNb2RlbC50b2dnbGVCb3VuY2UoKTtcbiAgICBhcHAubW9kZWwucGxhY2VEZXRhaWxzQnlQbGFjZUlkKGFwcC5tb2RlbC5jdXJyZW50TWFya2VyKTtcbiAgfTtcblxuICAgIC8vIEBkZXNjcmlwdGlvbiBWYW5pbGxhIEpTIHdheSB0byBsaXN0ZW4gZm9yIHJlc2l6aW5nIG9mIHRoZSB3aW5kb3dcbiAgICAvLyBhbmQgYWRqdXN0IG1hcCBib3VuZHNcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uKGUpIHtcbiAgICAvLyBNYWtlIHN1cmUgdGhlIG1hcCBib3VuZHMgZ2V0IHVwZGF0ZWQgb24gcGFnZSByZXNpemVcbiAgICBhcHAuVmlld01vZGVsLm1hcC5maXRCb3VuZHMod2luZG93Lm1hcEJvdW5kcyk7XG4gICAgIC8vIGFwcC5WaWV3TW9kZWwubWFwLnBhblRvKHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uKTtcbiAgICBhcHAuVmlld01vZGVsLm1hcC5zZXRDZW50ZXIoYm91bmRzLmdldENlbnRlcigpKTtcblxuICAgIGNvbnNvbGUubG9nKCdyZXNpemVkJyArIGUubWVzc2FnZSk7XG4gIH0pO1xufTtcblxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
